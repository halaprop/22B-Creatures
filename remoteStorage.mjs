const a0_0x1301fe=a0_0x1d3c;function a0_0x1d3c(_0x3c7215,_0x3e1e08){const _0x334e02=a0_0x334e();return a0_0x1d3c=function(_0x1d3c59,_0x4abc73){_0x1d3c59=_0x1d3c59-0xa1;let _0x4be1f4=_0x334e02[_0x1d3c59];return _0x4be1f4;},a0_0x1d3c(_0x3c7215,_0x3e1e08);}(function(_0x5083f0,_0x50089a){const _0x59cc13=a0_0x1d3c,_0x444adc=_0x5083f0();while(!![]){try{const _0x134c45=-parseInt(_0x59cc13(0xb3))/0x1*(-parseInt(_0x59cc13(0xa4))/0x2)+parseInt(_0x59cc13(0xbe))/0x3*(parseInt(_0x59cc13(0xbb))/0x4)+parseInt(_0x59cc13(0xac))/0x5+parseInt(_0x59cc13(0xb0))/0x6+parseInt(_0x59cc13(0xb4))/0x7+-parseInt(_0x59cc13(0xc3))/0x8*(parseInt(_0x59cc13(0xa2))/0x9)+parseInt(_0x59cc13(0xab))/0xa*(-parseInt(_0x59cc13(0xb2))/0xb);if(_0x134c45===_0x50089a)break;else _0x444adc['push'](_0x444adc['shift']());}catch(_0x2029d6){_0x444adc['push'](_0x444adc['shift']());}}}(a0_0x334e,0x77d3b));function a0_0x334e(){const _0x48ddf9=['4722654sITLUi','fetch','583skCmyH','17207WgqruA','6659457AnrntB','append','log','entries','/set','getItem','startsWith','4NhLBbD','/getWithMetadata','toString','947493IvwLSm','namespace','setItem','\x20â†’\x20ERROR:\x20','application/json','1455416CbJXBC','push','keysPaged','removeItem','DELETE','/delete','keys','27sPmSKs','clear','114ZleHHx','search','json','requestHeaders','name','GET','message','390640BKTTUv','359470kEFWCC','list','all','map'];a0_0x334e=function(){return _0x48ddf9;};return a0_0x334e();}export class RemoteStorage{constructor(_0x5dd20e,_0x694de9){const _0x369984=a0_0x1d3c;this[_0x369984(0xbf)]=_0x5dd20e,this['endpoint']='https://remote-storage.dan-5d7.workers.dev/v1',this[_0x369984(0xa7)]={'Authorization':_0x694de9,'Content-Type':_0x369984(0xc2)};}async[a0_0x1301fe(0xa1)](){const _0x2c8c0b=a0_0x1301fe;let _0x1fffc8=[],_0x3e500b=null;while(!![]){const {keys:_0xf408de,cursor:_0x372d1d,list_complete:_0x52df12}=await this[_0x2c8c0b(0xc5)]({'cursor':_0x3e500b});_0x1fffc8[_0x2c8c0b(0xc4)](..._0xf408de);if(_0x52df12)break;_0x3e500b=_0x372d1d;}return _0x1fffc8;}async[a0_0x1301fe(0xc5)]({limit:limit=0x3e8,cursor:_0xa1d5f7=null}={}){const _0x5b127b=a0_0x1301fe,{items:_0x466429,cursor:_0x5ba88c,list_complete:_0x4941a0}=await this[_0x5b127b(0xad)]({'limit':limit,'cursor':_0xa1d5f7}),_0x312c52=_0x466429[_0x5b127b(0xaf)](_0x1c0eff=>_0x1c0eff[_0x5b127b(0xa8)]);return{'keys':_0x312c52,'cursor':_0x5ba88c,'list_complete':_0x4941a0};}async['getNamespace'](..._0x3787c4){const _0x3b08fe=a0_0x1301fe,_0x5c7872={};let _0x5e9d35=null;while(!![]){const {items:_0x1e4025,cursor:_0x57ca2d,list_complete:_0x3edf4e}=await this[_0x3b08fe(0xad)]({'cursor':_0x5e9d35}),_0xecb75f=_0x3787c4['length']?_0x1e4025['filter'](_0x38ce33=>_0x3787c4['some'](_0x3282b1=>_0x38ce33[_0x3b08fe(0xa8)][_0x3b08fe(0xba)](_0x3282b1))):_0x1e4025,_0x33c58e=_0xecb75f[_0x3b08fe(0xaf)](async({name:_0x48234f,metadata:_0x8811ee})=>{const _0x22aace=_0x3b08fe,_0x3dc053=await this[_0x22aace(0xb9)](_0x48234f);_0x5c7872[_0x48234f]={'value':_0x3dc053,'metadata':_0x8811ee};});await Promise[_0x3b08fe(0xae)](_0x33c58e);if(_0x3edf4e)break;_0x5e9d35=_0x57ca2d;}return _0x5c7872;}async[a0_0x1301fe(0xad)]({limit:limit=0x3e8,cursor:cursor=null}={}){const _0x14e03e=a0_0x1301fe;return this[_0x14e03e(0xb1)](_0x14e03e(0xa9),'/list',null,{'limit':limit,'cursor':cursor});}async[a0_0x1301fe(0xc0)](_0x1e04cc,_0x3f7a43){const _0x396ece=a0_0x1301fe;return this[_0x396ece(0xb1)]('POST',_0x396ece(0xb8),{'key':_0x1e04cc,'value':_0x3f7a43});}async[a0_0x1301fe(0xb9)](_0x2bc6ff){const _0x4745e8=a0_0x1301fe;return this[_0x4745e8(0xb1)]('GET','/get',null,{'key':_0x2bc6ff});}async['getItemWithMetadata'](_0x52ae20){const _0x10dcd3=a0_0x1301fe;return this['fetch'](_0x10dcd3(0xa9),_0x10dcd3(0xbc),null,{'key':_0x52ae20});}async[a0_0x1301fe(0xc6)](_0x3e38c1){const _0x36b910=a0_0x1301fe;return this['fetch'](_0x36b910(0xc7),_0x36b910(0xc8),null,{'key':_0x3e38c1});}async[a0_0x1301fe(0xa3)](){const _0x3b3320=a0_0x1301fe,_0x1ad7f1=await this[_0x3b3320(0xa1)](),_0x1a1efe=_0x1ad7f1[_0x3b3320(0xaf)](_0x4c2c89=>this[_0x3b3320(0xc6)](_0x4c2c89));return await Promise[_0x3b3320(0xae)](_0x1a1efe),null;}async[a0_0x1301fe(0xb1)](_0x52558e,_0x4ded47,_0x3f1267=null,_0x198783={}){const _0x6b447c=a0_0x1301fe;_0x198783={..._0x198783,'namespace':this['namespace']};let _0x2a48ca=new URL(''+this['endpoint']+_0x4ded47);const _0x3a84c0=new URLSearchParams();for(const [_0x451a26,_0x4bc427]of Object[_0x6b447c(0xb7)](_0x198783)){_0x4bc427!==undefined&&_0x4bc427!==null&&_0x3a84c0[_0x6b447c(0xb5)](_0x451a26,_0x4bc427);}_0x2a48ca[_0x6b447c(0xa5)]=_0x3a84c0[_0x6b447c(0xbd)]();const _0x419904={'method':_0x52558e,'headers':this[_0x6b447c(0xa7)]};if(_0x3f1267)_0x419904['body']=JSON['stringify'](_0x3f1267);try{const _0x4cdf1c=await fetch(_0x2a48ca,_0x419904),_0x35b3eb=await _0x4cdf1c[_0x6b447c(0xa6)]();if(!_0x4cdf1c['ok'])throw{'error':_0x35b3eb};return _0x35b3eb;}catch(_0x479267){console[_0x6b447c(0xb6)](_0x52558e+'\x20'+_0x2a48ca+_0x6b447c(0xc1)+_0x479267[_0x6b447c(0xaa)]);throw _0x479267;}}}