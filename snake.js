const a0_0x1fc27e=a0_0x4337;(function(_0x16b8a6,_0x4ee4ac){const _0x303622=a0_0x4337,_0x41330f=_0x16b8a6();while(!![]){try{const _0x1219b4=-parseInt(_0x303622(0x77))/0x1+parseInt(_0x303622(0x75))/0x2+parseInt(_0x303622(0x8e))/0x3*(parseInt(_0x303622(0xa7))/0x4)+-parseInt(_0x303622(0x8c))/0x5+-parseInt(_0x303622(0x6c))/0x6*(-parseInt(_0x303622(0x86))/0x7)+-parseInt(_0x303622(0x9a))/0x8*(-parseInt(_0x303622(0x8f))/0x9)+-parseInt(_0x303622(0x83))/0xa;if(_0x1219b4===_0x4ee4ac)break;else _0x41330f['push'](_0x41330f['shift']());}catch(_0x32c7a0){_0x41330f['push'](_0x41330f['shift']());}}}(a0_0x4499,0xc0916));function a0_0x4337(_0x3baea5,_0x5be33d){const _0x44990b=a0_0x4499();return a0_0x4337=function(_0x43374d,_0x23dcac){_0x43374d=_0x43374d-0x66;let _0x2064fb=_0x44990b[_0x43374d];return _0x2064fb;},a0_0x4337(_0x3baea5,_0x5be33d);}function a0_0x4499(){const _0x57a3e8=['calories','tail','steer','col','statusString','ArrowLeft','popFront','orange','lime','headGlyph','9402WIluPb','rowCount','toFixed','metric','dCol','setStatusLine','pink','dRow','color','1257168jVByVS','Random','1564092rjHFgd','randomCandy','randomPosition','cyan','setSeed','red','popBack','pushBack','randBetween','value','snake','intersects','15614800BpiQxi','cout','drawCharAt','6377RAuVcJ','main-canvas','step','willCrash','grid','keydown','2240805cJzUiN','Ouch,\x20my\x20nose!','1816218bwDymP','1643337LRAVeN','row','turnCount','ArrowDown','glyph','Length:\x20','gameOver','head','\x20Turns:\x20','ArrowRight','eat','48ukYsuC','randomColor','length','ArrowUp','getElementById','pushFront','white','cout-lines','drawChars','colCount','seed','candy','next','8caHOYm','draw','seedRandom','eraseCharAt','.\x20Metric:\x20'];a0_0x4499=function(){return _0x57a3e8;};return a0_0x4499();}import{ConsoleGrid,Cout}from'./console-grid.js';export class SnakeApp{constructor(){const _0x512bca=a0_0x4337,_0x217d0a={'canvas':document[_0x512bca(0x9e)](_0x512bca(0x87)),'rowCount':0x14,'colCount':0x1e,'backgroundDots':!![]};this['sleepTimeout']=0x64,this['grid']=new ConsoleGrid(_0x217d0a);const _0x51abd6=document[_0x512bca(0x9e)](_0x512bca(0xa1));this[_0x512bca(0x84)]=new Cout(_0x51abd6),this['turnCount']=0x0,this[_0x512bca(0x95)]=![],this[_0x512bca(0x81)]=new Snake(),this[_0x512bca(0x81)][_0x512bca(0xa2)](this['grid']),Candy[_0x512bca(0xa9)](),this[_0x512bca(0xa5)]=Candy['randomCandy'](this[_0x512bca(0x81)],this[_0x512bca(0x8a)][_0x512bca(0x6d)],this[_0x512bca(0x8a)][_0x512bca(0xa3)]),this[_0x512bca(0xa5)]['draw'](this[_0x512bca(0x8a)]),this[_0x512bca(0x8a)]['setStatusLine'](this[_0x512bca(0x66)]());}[a0_0x1fc27e(0x6f)](){const _0x940547=a0_0x1fc27e,_0x5f4aeb=this[_0x940547(0x91)],_0x24ba41=this['snake']['length']();return _0x5f4aeb==0x0?0x0:0x1*_0x24ba41*_0x24ba41/_0x5f4aeb;}[a0_0x1fc27e(0x66)](_0x2bdbf8){const _0x3ba161=a0_0x1fc27e;let _0x1b0c22=_0x3ba161(0x94)+this[_0x3ba161(0x81)][_0x3ba161(0x9c)]()+_0x3ba161(0x97)+this[_0x3ba161(0x91)]+_0x3ba161(0xab)+this[_0x3ba161(0x6f)]()[_0x3ba161(0x6e)](0x3);if(_0x2bdbf8)_0x1b0c22+='.\x20'+_0x2bdbf8;return _0x1b0c22;}[a0_0x1fc27e(0x8b)](_0x45bd0d){const _0x21094b=a0_0x1fc27e;let _0x1c6277='';switch(_0x45bd0d){case'ArrowLeft':case'ArrowRight':case _0x21094b(0x9d):case'ArrowDown':this[_0x21094b(0x81)][_0x21094b(0xae)](_0x45bd0d,this['grid'],this[_0x21094b(0xa5)][_0x21094b(0x90)],this[_0x21094b(0xa5)][_0x21094b(0xaf)]);break;case'Q':case'q':this[_0x21094b(0x95)]=!![],_0x1c6277='Player\x20quit';break;default:break;}!this[_0x21094b(0x95)]&&(this[_0x21094b(0x81)][_0x21094b(0x89)](this[_0x21094b(0x8a)])?(this['gameOver']=!![],_0x1c6277=_0x21094b(0x8d)):(this['snake'][_0x21094b(0x88)](this[_0x21094b(0x8a)]),this[_0x21094b(0x91)]++,this[_0x21094b(0x81)]['headIntersects'](this[_0x21094b(0xa5)]['row'],this[_0x21094b(0xa5)][_0x21094b(0xaf)])&&(this['snake'][_0x21094b(0x99)](this['candy']['calories']),this[_0x21094b(0x81)]['color']=this['candy']['color'],this[_0x21094b(0x81)]['drawChars'](this[_0x21094b(0x8a)]),this[_0x21094b(0x81)][_0x21094b(0x9c)]()<this[_0x21094b(0x8a)][_0x21094b(0x6d)]*this['grid'][_0x21094b(0xa3)]?(this[_0x21094b(0xa5)]=Candy[_0x21094b(0x78)](this[_0x21094b(0x81)],this[_0x21094b(0x8a)][_0x21094b(0x6d)],this[_0x21094b(0x8a)][_0x21094b(0xa3)]),this[_0x21094b(0xa5)][_0x21094b(0xa8)](this['grid'])):(this[_0x21094b(0x95)]=!![],_0x1c6277='Board\x20is\x20full!')))),this[_0x21094b(0x8a)][_0x21094b(0x71)](this[_0x21094b(0x66)](_0x1c6277));}['contestStatus'](){const _0x2d43dc=a0_0x1fc27e,_0x5a3186=this['turnCount'],_0x5143b5=this[_0x2d43dc(0x81)][_0x2d43dc(0x9c)](),_0x1f9bcf=this[_0x2d43dc(0x6f)]();return{'turnCount':_0x5a3186,'length':_0x5143b5,'metric':_0x1f9bcf};}}class ListNode{constructor(_0x5e44ff,_0x1ea8d9=null){const _0x397afa=a0_0x1fc27e;this[_0x397afa(0x80)]=_0x5e44ff,this[_0x397afa(0xa6)]=_0x1ea8d9;}}class LinkedList{constructor(){const _0x279e47=a0_0x1fc27e;this[_0x279e47(0x96)]=null;}['pushFront'](_0x33b03d){const _0x8424f2=a0_0x1fc27e;this[_0x8424f2(0x96)]=new ListNode(_0x33b03d,this['head']);}[a0_0x1fc27e(0x68)](){const _0x5f1921=a0_0x1fc27e;this['head']&&(this[_0x5f1921(0x96)]=this[_0x5f1921(0x96)][_0x5f1921(0xa6)]);}[a0_0x1fc27e(0x7e)](_0x511202){const _0x2a132f=a0_0x1fc27e,_0x5eed2c=this[_0x2a132f(0xad)](),_0x341ca1=new ListNode(_0x511202);_0x5eed2c?_0x5eed2c[_0x2a132f(0xa6)]=_0x341ca1:this[_0x2a132f(0x96)]=_0x341ca1;}[a0_0x1fc27e(0x7d)](){const _0x3e498c=a0_0x1fc27e,_0x630e7a=this[_0x3e498c(0xad)]();if(_0x630e7a){if(this['head']==_0x630e7a)this[_0x3e498c(0x96)]=null;else{let _0x179640=this[_0x3e498c(0x96)];while(_0x179640[_0x3e498c(0xa6)]!=_0x630e7a)_0x179640=_0x179640[_0x3e498c(0xa6)];_0x179640[_0x3e498c(0xa6)]=null;}}}['tail'](){let _0x148c17=null;for(let _0x4ff3ce=this['head'];_0x4ff3ce;_0x4ff3ce=_0x4ff3ce['next']){_0x148c17=_0x4ff3ce;}return _0x148c17;}[a0_0x1fc27e(0x9c)](){const _0x2da376=a0_0x1fc27e;let _0x38b300=0x0;for(let _0x31e056=this[_0x2da376(0x96)];_0x31e056;_0x31e056=_0x31e056[_0x2da376(0xa6)]){_0x38b300++;}return _0x38b300;}}class Snake extends LinkedList{constructor(){const _0x529e04=a0_0x1fc27e;super(),this['calories']=0x0,this[_0x529e04(0x74)]=_0x529e04(0xa0),this['glyph']='o',this[_0x529e04(0x6b)]='@',this[_0x529e04(0x73)]=0x0,this['dCol']=0x1,this['pushBack']({'row':0x5,'col':0x5}),this[_0x529e04(0x7e)]({'row':0x5,'col':0x4}),this[_0x529e04(0x7e)]({'row':0x5,'col':0x3});}[a0_0x1fc27e(0x89)](_0x54c60c){const _0x9ca70=a0_0x1fc27e,_0x866569=this[_0x9ca70(0x96)][_0x9ca70(0x80)]['row']+this[_0x9ca70(0x73)],_0x204ec6=this[_0x9ca70(0x96)][_0x9ca70(0x80)][_0x9ca70(0xaf)]+this[_0x9ca70(0x70)],_0x665513=_0x866569>=0x0&&_0x866569<_0x54c60c[_0x9ca70(0x6d)]&&_0x204ec6>=0x0&&_0x204ec6<_0x54c60c[_0x9ca70(0xa3)];return!_0x665513||this[_0x9ca70(0x82)](_0x866569,_0x204ec6);}['headIntersects'](_0x13f32c,_0xbf1e9a){const _0x37b150=a0_0x1fc27e;return this[_0x37b150(0x96)]['value'][_0x37b150(0x90)]==_0x13f32c&&this[_0x37b150(0x96)][_0x37b150(0x80)][_0x37b150(0xaf)]==_0xbf1e9a;}[a0_0x1fc27e(0x82)](_0x4fd5c1,_0x213e67){const _0x3826ba=a0_0x1fc27e;let _0x585911=![],_0x4f320b=this[_0x3826ba(0x96)];while(_0x4f320b){if(_0x4f320b[_0x3826ba(0x80)][_0x3826ba(0x90)]==_0x4fd5c1&&_0x4f320b['value']['col']==_0x213e67){_0x585911=!![];break;}_0x4f320b=_0x4f320b[_0x3826ba(0xa6)];}return _0x585911;}[a0_0x1fc27e(0xa2)](_0x524b3c){const _0x5c2068=a0_0x1fc27e;let _0x239574=this['headGlyph'];for(let _0x41324b=this[_0x5c2068(0x96)];_0x41324b;_0x41324b=_0x41324b[_0x5c2068(0xa6)]){_0x524b3c[_0x5c2068(0x85)](_0x41324b[_0x5c2068(0x80)][_0x5c2068(0x90)],_0x41324b[_0x5c2068(0x80)]['col'],_0x239574,this[_0x5c2068(0x74)]),_0x239574=this[_0x5c2068(0x93)];}}[a0_0x1fc27e(0xae)](_0x1321d0,_0x1e2e45,_0x61f2a6,_0x1966c0){const _0x555d82=a0_0x1fc27e;this[_0x555d82(0x73)]=0x0,this[_0x555d82(0x70)]=0x0;switch(_0x1321d0){case _0x555d82(0x67):this[_0x555d82(0x70)]=-0x1;break;case _0x555d82(0x98):this['dCol']=0x1;break;case _0x555d82(0x9d):this[_0x555d82(0x73)]=-0x1;break;case _0x555d82(0x92):this['dRow']=0x1;break;default:break;}}['step'](_0x292bdb){const _0x2d5d11=a0_0x1fc27e;let _0xbd94af=this[_0x2d5d11(0x96)]['value'][_0x2d5d11(0x90)]+this[_0x2d5d11(0x73)],_0x2c5e55=this[_0x2d5d11(0x96)][_0x2d5d11(0x80)][_0x2d5d11(0xaf)]+this[_0x2d5d11(0x70)];_0x292bdb[_0x2d5d11(0x85)](this[_0x2d5d11(0x96)][_0x2d5d11(0x80)][_0x2d5d11(0x90)],this[_0x2d5d11(0x96)][_0x2d5d11(0x80)][_0x2d5d11(0xaf)],this['glyph'],this[_0x2d5d11(0x74)]),this[_0x2d5d11(0x9f)]({'row':_0xbd94af,'col':_0x2c5e55}),_0x292bdb[_0x2d5d11(0x85)](_0xbd94af,_0x2c5e55,this[_0x2d5d11(0x6b)],this[_0x2d5d11(0x74)]);if(this[_0x2d5d11(0xac)]>0x0)this['calories']--;else{const _0x36f841=this[_0x2d5d11(0xad)]();_0x292bdb[_0x2d5d11(0xaa)](_0x36f841[_0x2d5d11(0x80)]['row'],_0x36f841[_0x2d5d11(0x80)]['col']),this[_0x2d5d11(0x7d)]();}}[a0_0x1fc27e(0x99)](_0x498622){const _0x40d4eb=a0_0x1fc27e;this[_0x40d4eb(0xac)]+=_0x498622;}}class Candy{static['seedRandom'](){this['Random']=new RandANSI();}constructor(_0x47fa8e){Object['assign'](this,_0x47fa8e);}static['randomCandy'](_0x3b67e5,_0x11092c,_0x23c847){const _0x517632=a0_0x1fc27e,{row:_0x19cf7b,col:_0xa486e8}=this[_0x517632(0x79)](_0x3b67e5,_0x11092c,_0x23c847),_0x1e0746=this['randomColor'](),_0xeebc51=Candy[_0x517632(0x76)][_0x517632(0x7f)](0x1,0xa),_0x5969c3=''+_0xeebc51;return new Candy({'row':_0x19cf7b,'col':_0xa486e8,'calories':_0xeebc51,'glyph':_0x5969c3,'color':_0x1e0746});}static[a0_0x1fc27e(0x79)](_0x377545,_0x73bb89,_0x530950){const _0x4ee8f5=a0_0x1fc27e;let _0x58a7d3,_0x2d7681;do{_0x58a7d3=Candy['Random']['randBetween'](0x0,_0x73bb89),_0x2d7681=Candy[_0x4ee8f5(0x76)][_0x4ee8f5(0x7f)](0x0,_0x530950);}while(_0x377545[_0x4ee8f5(0x82)](_0x58a7d3,_0x2d7681));return{'row':_0x58a7d3,'col':_0x2d7681};}static[a0_0x1fc27e(0x9b)](){const _0x545264=a0_0x1fc27e,_0x31c53f=[_0x545264(0x7c),_0x545264(0x6a),'yellow',_0x545264(0x7a),'magenta',_0x545264(0x69),_0x545264(0x72)];return _0x31c53f[Candy['Random'][_0x545264(0x7f)](0x0,_0x31c53f[_0x545264(0x9c)])];}[a0_0x1fc27e(0xa8)](_0x45f6f2){const _0x273ca5=a0_0x1fc27e;_0x45f6f2[_0x273ca5(0x85)](this[_0x273ca5(0x90)],this[_0x273ca5(0xaf)],this[_0x273ca5(0x93)],this[_0x273ca5(0x74)]);}}class RandANSI{constructor(_0x3e76b7=0x1){const _0x1dd772=a0_0x1fc27e;this[_0x1dd772(0xa4)]=_0x3e76b7;}[a0_0x1fc27e(0x7b)](_0x5dc7b5){const _0x296e99=a0_0x1fc27e;this[_0x296e99(0xa4)]=_0x5dc7b5;}['rand'](){const _0x507b8e=a0_0x1fc27e;return(this[_0x507b8e(0xa4)]=Number((BigInt(this[_0x507b8e(0xa4)])*0x41c64e6dn+0x3039n)%0x80000000n))>>0x10&0x7fff;}[a0_0x1fc27e(0x7f)](_0x353780,_0x2680b4){return _0x353780+this['rand']()%(_0x2680b4-_0x353780);}}