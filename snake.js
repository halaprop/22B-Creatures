const a0_0x55a964=a0_0x5e1d;(function(_0x34e89b,_0x5321c8){const _0x3e63b5=a0_0x5e1d,_0x414b02=_0x34e89b();while(!![]){try{const _0x195e9c=parseInt(_0x3e63b5(0x1fb))/0x1+-parseInt(_0x3e63b5(0x202))/0x2+parseInt(_0x3e63b5(0x213))/0x3+parseInt(_0x3e63b5(0x219))/0x4*(parseInt(_0x3e63b5(0x21f))/0x5)+-parseInt(_0x3e63b5(0x1e1))/0x6*(-parseInt(_0x3e63b5(0x1e5))/0x7)+-parseInt(_0x3e63b5(0x203))/0x8+-parseInt(_0x3e63b5(0x209))/0x9*(-parseInt(_0x3e63b5(0x201))/0xa);if(_0x195e9c===_0x5321c8)break;else _0x414b02['push'](_0x414b02['shift']());}catch(_0x538b4c){_0x414b02['push'](_0x414b02['shift']());}}}(a0_0x4f03,0x9088a));import{ConsoleGrid,Cout}from'./console-grid.js';export class SnakeApp{constructor(){const _0x2c1eea=a0_0x5e1d,_0x356c60={'canvas':document[_0x2c1eea(0x20b)](_0x2c1eea(0x204)),'rowCount':0x14,'colCount':0x1e,'backgroundDots':!![]};this[_0x2c1eea(0x20a)]=0x64,this[_0x2c1eea(0x1f3)]=new ConsoleGrid(_0x356c60);const _0x7bb72e=document[_0x2c1eea(0x20b)](_0x2c1eea(0x210));this[_0x2c1eea(0x205)]=new Cout(_0x7bb72e),this['turnCount']=0x0,this['gameOver']=![],this['snake']=new Snake(),this[_0x2c1eea(0x20d)][_0x2c1eea(0x1dc)](this['grid']),Candy['seedRandom'](),this[_0x2c1eea(0x1ff)]=Candy[_0x2c1eea(0x218)](this[_0x2c1eea(0x20d)],this[_0x2c1eea(0x1f3)][_0x2c1eea(0x1f5)],this[_0x2c1eea(0x1f3)][_0x2c1eea(0x215)]),this['candy']['draw'](this[_0x2c1eea(0x1f3)]),this['grid'][_0x2c1eea(0x1ed)](this[_0x2c1eea(0x1fa)]());}[a0_0x55a964(0x21c)](){const _0x290644=a0_0x55a964,_0x3fbd5d=this[_0x290644(0x20c)],_0x1e5aef=this[_0x290644(0x20d)][_0x290644(0x1e8)]();return _0x3fbd5d==0x0?0x0:0x1*_0x1e5aef*_0x1e5aef/_0x3fbd5d;}['statusString'](_0x2591f1){const _0x4d077e=a0_0x55a964;let _0x372220=_0x4d077e(0x207)+this[_0x4d077e(0x20d)][_0x4d077e(0x1e8)]()+_0x4d077e(0x1d7)+this['turnCount']+_0x4d077e(0x20f)+this[_0x4d077e(0x21c)]()['toFixed'](0x3);if(_0x2591f1)_0x372220+='.\x20'+_0x2591f1;return _0x372220;}['keydown'](_0x518555){const _0x52fa3d=a0_0x55a964;let _0x52ae3e='';switch(_0x518555){case'ArrowLeft':case'ArrowRight':case'ArrowUp':case _0x52fa3d(0x21a):this['snake'][_0x52fa3d(0x1f0)](_0x518555,this[_0x52fa3d(0x1f3)],this[_0x52fa3d(0x1ff)][_0x52fa3d(0x1e3)],this['candy'][_0x52fa3d(0x1d9)]);break;case'Q':case'q':this['gameOver']=!![],_0x52ae3e=_0x52fa3d(0x1f4);break;default:break;}!this[_0x52fa3d(0x1df)]&&(this[_0x52fa3d(0x20d)]['willCrash'](this['grid'])?(this[_0x52fa3d(0x1df)]=!![],_0x52ae3e=_0x52fa3d(0x220)):(this[_0x52fa3d(0x20d)][_0x52fa3d(0x1e9)](this[_0x52fa3d(0x1f3)]),this[_0x52fa3d(0x20c)]++,this[_0x52fa3d(0x20d)][_0x52fa3d(0x1dd)](this[_0x52fa3d(0x1ff)]['row'],this['candy'][_0x52fa3d(0x1d9)])&&(this[_0x52fa3d(0x20d)][_0x52fa3d(0x1e6)](this[_0x52fa3d(0x1ff)]['calories']),this['snake'][_0x52fa3d(0x1d5)]=this[_0x52fa3d(0x1ff)]['color'],this[_0x52fa3d(0x20d)][_0x52fa3d(0x1dc)](this['grid']),this['snake'][_0x52fa3d(0x1e8)]()<this[_0x52fa3d(0x1f3)]['rowCount']*this[_0x52fa3d(0x1f3)][_0x52fa3d(0x215)]?(this['candy']=Candy[_0x52fa3d(0x218)](this[_0x52fa3d(0x20d)],this['grid']['rowCount'],this[_0x52fa3d(0x1f3)][_0x52fa3d(0x215)]),this[_0x52fa3d(0x1ff)][_0x52fa3d(0x21d)](this['grid'])):(this['gameOver']=!![],_0x52ae3e=_0x52fa3d(0x200))))),this[_0x52fa3d(0x1f3)][_0x52fa3d(0x1ed)](this['statusString'](_0x52ae3e));}[a0_0x55a964(0x1f8)](){const _0x157454=a0_0x55a964,_0x44d831=this['turnCount'],_0x7eeaa=this[_0x157454(0x20d)][_0x157454(0x1e8)](),_0x256024=this[_0x157454(0x21c)]();return{'turnCount':_0x44d831,'length':_0x7eeaa,'metric':_0x256024};}}function a0_0x4f03(){const _0x3e0cb4=['randomColor','rand','steer','assign','eraseCharAt','grid','Player\x20quit','rowCount','dRow','pushFront','contestStatus','head','statusString','995967FfXMie','popBack','seed','seedRandom','candy','Board\x20is\x20full!','10Tasxwh','1819782ygOpaP','3049432lHNYGk','main-canvas','cout','ArrowLeft','Length:\x20','tail','1006353mxCmGO','sleepTimeout','getElementById','turnCount','snake','cyan','.\x20Metric:\x20','cout-lines','ArrowUp','drawCharAt','688059FgoqWY','glyph','colCount','setSeed','calories','randomCandy','10016ylDAUo','ArrowDown','willCrash','metric','draw','randomPosition','475euKBxQ','Ouch,\x20my\x20nose!','intersects','color','value','\x20Turns:\x20','headGlyph','col','magenta','pushBack','drawChars','headIntersects','yellow','gameOver','pink','6sbnxaB','randBetween','row','dCol','2156441Tvzfae','eat','white','length','step','Random','red','next','setStatusLine'];a0_0x4f03=function(){return _0x3e0cb4;};return a0_0x4f03();}class ListNode{constructor(_0x2bd4b1,_0x41284c=null){this['value']=_0x2bd4b1,this['next']=_0x41284c;}}class LinkedList{constructor(){const _0x3b2fc0=a0_0x55a964;this[_0x3b2fc0(0x1f9)]=null;}[a0_0x55a964(0x1f7)](_0xaf9bdf){const _0x54aac2=a0_0x55a964;this['head']=new ListNode(_0xaf9bdf,this[_0x54aac2(0x1f9)]);}['popFront'](){const _0x5768b2=a0_0x55a964;this['head']&&(this[_0x5768b2(0x1f9)]=this['head']['next']);}[a0_0x55a964(0x1db)](_0x1faff6){const _0x275768=a0_0x55a964,_0x5d510d=this[_0x275768(0x208)](),_0x2dd0c2=new ListNode(_0x1faff6);_0x5d510d?_0x5d510d[_0x275768(0x1ec)]=_0x2dd0c2:this['head']=_0x2dd0c2;}['popBack'](){const _0x4532b3=a0_0x55a964,_0x41f393=this[_0x4532b3(0x208)]();if(_0x41f393){if(this[_0x4532b3(0x1f9)]==_0x41f393)this[_0x4532b3(0x1f9)]=null;else{let _0x5909c0=this[_0x4532b3(0x1f9)];while(_0x5909c0['next']!=_0x41f393)_0x5909c0=_0x5909c0[_0x4532b3(0x1ec)];_0x5909c0[_0x4532b3(0x1ec)]=null;}}}[a0_0x55a964(0x208)](){const _0x267a89=a0_0x55a964;let _0x1b6dcb=null;for(let _0x16f187=this[_0x267a89(0x1f9)];_0x16f187;_0x16f187=_0x16f187[_0x267a89(0x1ec)]){_0x1b6dcb=_0x16f187;}return _0x1b6dcb;}[a0_0x55a964(0x1e8)](){const _0x3b4b92=a0_0x55a964;let _0xa6d30d=0x0;for(let _0x2f330e=this[_0x3b4b92(0x1f9)];_0x2f330e;_0x2f330e=_0x2f330e[_0x3b4b92(0x1ec)]){_0xa6d30d++;}return _0xa6d30d;}}function a0_0x5e1d(_0x4158be,_0x106c78){const _0x4f038f=a0_0x4f03();return a0_0x5e1d=function(_0x5e1dc9,_0x29f891){_0x5e1dc9=_0x5e1dc9-0x1d5;let _0x25b249=_0x4f038f[_0x5e1dc9];return _0x25b249;},a0_0x5e1d(_0x4158be,_0x106c78);}class Snake extends LinkedList{constructor(){const _0x5c407c=a0_0x55a964;super(),this[_0x5c407c(0x217)]=0x0,this[_0x5c407c(0x1d5)]=_0x5c407c(0x1e7),this['glyph']='o',this['headGlyph']='@',this[_0x5c407c(0x1f6)]=0x0,this[_0x5c407c(0x1e4)]=0x1,this['pushBack']({'row':0x5,'col':0x5}),this[_0x5c407c(0x1db)]({'row':0x5,'col':0x4}),this[_0x5c407c(0x1db)]({'row':0x5,'col':0x3});}[a0_0x55a964(0x21b)](_0xf90c42){const _0x31d812=a0_0x55a964,_0x174a28=this[_0x31d812(0x1f9)][_0x31d812(0x1d6)][_0x31d812(0x1e3)]+this[_0x31d812(0x1f6)],_0x53fd83=this['head'][_0x31d812(0x1d6)][_0x31d812(0x1d9)]+this[_0x31d812(0x1e4)],_0x4fb046=_0x174a28>=0x0&&_0x174a28<_0xf90c42[_0x31d812(0x1f5)]&&_0x53fd83>=0x0&&_0x53fd83<_0xf90c42['colCount'];return!_0x4fb046||this['intersects'](_0x174a28,_0x53fd83);}[a0_0x55a964(0x1dd)](_0x2c6757,_0x27265f){const _0x2e42ac=a0_0x55a964;return this[_0x2e42ac(0x1f9)][_0x2e42ac(0x1d6)][_0x2e42ac(0x1e3)]==_0x2c6757&&this[_0x2e42ac(0x1f9)]['value']['col']==_0x27265f;}['intersects'](_0x4a5ab3,_0x3d475f){const _0x54dbe9=a0_0x55a964;let _0x48ea48=![],_0x59c554=this[_0x54dbe9(0x1f9)];while(_0x59c554){if(_0x59c554[_0x54dbe9(0x1d6)][_0x54dbe9(0x1e3)]==_0x4a5ab3&&_0x59c554[_0x54dbe9(0x1d6)][_0x54dbe9(0x1d9)]==_0x3d475f){_0x48ea48=!![];break;}_0x59c554=_0x59c554[_0x54dbe9(0x1ec)];}return _0x48ea48;}[a0_0x55a964(0x1dc)](_0x3d198a){const _0x286977=a0_0x55a964;let _0x118b6d=this[_0x286977(0x1d8)];for(let _0xfffbce=this[_0x286977(0x1f9)];_0xfffbce;_0xfffbce=_0xfffbce[_0x286977(0x1ec)]){_0x3d198a['drawCharAt'](_0xfffbce[_0x286977(0x1d6)][_0x286977(0x1e3)],_0xfffbce[_0x286977(0x1d6)][_0x286977(0x1d9)],_0x118b6d,this[_0x286977(0x1d5)]),_0x118b6d=this[_0x286977(0x214)];}}[a0_0x55a964(0x1f0)](_0x194485,_0x3aebe6,_0x793d39,_0x1bf122){const _0x406c64=a0_0x55a964;this[_0x406c64(0x1f6)]=0x0,this['dCol']=0x0;switch(_0x194485){case _0x406c64(0x206):this[_0x406c64(0x1e4)]=-0x1;break;case'ArrowRight':this['dCol']=0x1;break;case _0x406c64(0x211):this[_0x406c64(0x1f6)]=-0x1;break;case _0x406c64(0x21a):this['dRow']=0x1;break;default:break;}}['step'](_0x5b2f59){const _0x504c7d=a0_0x55a964;let _0x1f8bd0=this['head'][_0x504c7d(0x1d6)]['row']+this[_0x504c7d(0x1f6)],_0x142e19=this[_0x504c7d(0x1f9)][_0x504c7d(0x1d6)]['col']+this[_0x504c7d(0x1e4)];_0x5b2f59[_0x504c7d(0x212)](this[_0x504c7d(0x1f9)][_0x504c7d(0x1d6)][_0x504c7d(0x1e3)],this['head']['value'][_0x504c7d(0x1d9)],this[_0x504c7d(0x214)],this[_0x504c7d(0x1d5)]),this['pushFront']({'row':_0x1f8bd0,'col':_0x142e19}),_0x5b2f59['drawCharAt'](_0x1f8bd0,_0x142e19,this['headGlyph'],this[_0x504c7d(0x1d5)]);if(this['calories']>0x0)this[_0x504c7d(0x217)]--;else{const _0x4de36b=this[_0x504c7d(0x208)]();_0x5b2f59[_0x504c7d(0x1f2)](_0x4de36b['value'][_0x504c7d(0x1e3)],_0x4de36b[_0x504c7d(0x1d6)][_0x504c7d(0x1d9)]),this[_0x504c7d(0x1fc)]();}}[a0_0x55a964(0x1e6)](_0x5c9716){const _0x2e3b43=a0_0x55a964;this[_0x2e3b43(0x217)]+=_0x5c9716;}}class Candy{static[a0_0x55a964(0x1fe)](){const _0x3a88b3=a0_0x55a964;this[_0x3a88b3(0x1ea)]=new RandANSI();}constructor(_0x46425f){const _0x2bae76=a0_0x55a964;Object[_0x2bae76(0x1f1)](this,_0x46425f);}static[a0_0x55a964(0x218)](_0xd709f5,_0x4bd422,_0x1f5864){const _0xb8aeaf=a0_0x55a964,{row:_0x6cb099,col:_0x4ec715}=this[_0xb8aeaf(0x21e)](_0xd709f5,_0x4bd422,_0x1f5864),_0x2f9e9f=this[_0xb8aeaf(0x1ee)](),_0x1a4375=Candy[_0xb8aeaf(0x1ea)][_0xb8aeaf(0x1e2)](0x1,0xa),_0x44a493=''+_0x1a4375;return new Candy({'row':_0x6cb099,'col':_0x4ec715,'calories':_0x1a4375,'glyph':_0x44a493,'color':_0x2f9e9f});}static[a0_0x55a964(0x21e)](_0x3cda56,_0x10f211,_0x5db61d){const _0x4a75fd=a0_0x55a964;let _0x4353e2,_0x4f4b02;do{_0x4353e2=Candy[_0x4a75fd(0x1ea)][_0x4a75fd(0x1e2)](0x0,_0x10f211),_0x4f4b02=Candy[_0x4a75fd(0x1ea)]['randBetween'](0x0,_0x5db61d);}while(_0x3cda56[_0x4a75fd(0x221)](_0x4353e2,_0x4f4b02));return{'row':_0x4353e2,'col':_0x4f4b02};}static[a0_0x55a964(0x1ee)](){const _0x5bd4f5=a0_0x55a964,_0x42a031=[_0x5bd4f5(0x1eb),'lime',_0x5bd4f5(0x1de),_0x5bd4f5(0x20e),_0x5bd4f5(0x1da),'orange',_0x5bd4f5(0x1e0)];return _0x42a031[Candy['Random'][_0x5bd4f5(0x1e2)](0x0,_0x42a031[_0x5bd4f5(0x1e8)])];}[a0_0x55a964(0x21d)](_0x460a74){const _0x3dd5da=a0_0x55a964;_0x460a74[_0x3dd5da(0x212)](this['row'],this[_0x3dd5da(0x1d9)],this[_0x3dd5da(0x214)],this[_0x3dd5da(0x1d5)]);}}class RandANSI{constructor(_0x1fd3cd=0x1){const _0x2281f2=a0_0x55a964;this[_0x2281f2(0x1fd)]=_0x1fd3cd;}[a0_0x55a964(0x216)](_0x3e38e0){const _0x4f2908=a0_0x55a964;this[_0x4f2908(0x1fd)]=_0x3e38e0;}[a0_0x55a964(0x1ef)](){const _0x1de5d0=a0_0x55a964;return(this[_0x1de5d0(0x1fd)]=Number((BigInt(this[_0x1de5d0(0x1fd)])*0x41c64e6dn+0x3039n)%0x80000000n))>>0x10&0x7fff;}['randBetween'](_0x3c000f,_0x4a9408){return _0x3c000f+this['rand']()%(_0x4a9408-_0x3c000f);}}