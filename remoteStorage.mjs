const a0_0x4e441a=a0_0x1c10;function a0_0x554a(){const _0x408d85=['1591384OAIrcM','application/json','/list','130ecnjeG','/delete','namespace','token','getItem','filter','json','name','/login','/get','status','map','requestHeaders','startsWith','network-error','apiFetch','https://remote-storage.dan-5d7.workers.dev/v1','6121DxGijA','endpoint','3220VzLoae','getNamespace','keys','removeItem','search','http-error','400hIXfXs','Authorization','stringify','6UaPbqD','body','1789932XDAkDJ','push','catch','clear','GET','message','14OlGONw','/getWithMetadata','26pfGyhg','119826AdaKjZ','all','length','6187775xvPOzC','code','39FLMehM','POST','list','type','register','keysPaged','setItem','1879825bjyzKJ'];a0_0x554a=function(){return _0x408d85;};return a0_0x554a();}function a0_0x1c10(_0x23d8b6,_0x3e2438){const _0x554a37=a0_0x554a();return a0_0x1c10=function(_0x1c10cd,_0x254cae){_0x1c10cd=_0x1c10cd-0x109;let _0x5f4293=_0x554a37[_0x1c10cd];return _0x5f4293;},a0_0x1c10(_0x23d8b6,_0x3e2438);}(function(_0x5a0fae,_0x19d008){const _0x2f368e=a0_0x1c10,_0x3b74cc=_0x5a0fae();while(!![]){try{const _0x5b008e=parseInt(_0x2f368e(0x13c))/0x1*(-parseInt(_0x2f368e(0x11a))/0x2)+-parseInt(_0x2f368e(0x120))/0x3*(-parseInt(_0x2f368e(0x13e))/0x4)+parseInt(_0x2f368e(0x127))/0x5*(parseInt(_0x2f368e(0x110))/0x6)+-parseInt(_0x2f368e(0x118))/0x7*(-parseInt(_0x2f368e(0x128))/0x8)+-parseInt(_0x2f368e(0x11b))/0x9*(-parseInt(_0x2f368e(0x10d))/0xa)+parseInt(_0x2f368e(0x11e))/0xb+parseInt(_0x2f368e(0x112))/0xc*(-parseInt(_0x2f368e(0x12b))/0xd);if(_0x5b008e===_0x19d008)break;else _0x3b74cc['push'](_0x3b74cc['shift']());}catch(_0x1dc184){_0x3b74cc['push'](_0x3b74cc['shift']());}}}(a0_0x554a,0x4b3d2));export class RemoteStorage{constructor(_0x260800,_0x887dad){const _0x2e44f2=a0_0x1c10;this['namespace']=_0x260800,this[_0x2e44f2(0x13d)]=_0x2e44f2(0x13b),this[_0x2e44f2(0x137)]={'Content-Type':'application/json'};if(_0x887dad)this[_0x2e44f2(0x137)][_0x2e44f2(0x10e)]=_0x887dad;}async[a0_0x4e441a(0x124)](_0x349062,_0x110e8d){const _0x3fb0d3=a0_0x4e441a,_0x5f3668=await fetch(this[_0x3fb0d3(0x13d)]+'/register',{'method':_0x3fb0d3(0x121),'headers':{'Content-Type':_0x3fb0d3(0x129)},'body':JSON[_0x3fb0d3(0x10f)]({'userID':_0x349062,'password':_0x110e8d})}),_0x35c44d=await _0x5f3668[_0x3fb0d3(0x131)]()['catch'](()=>({}));if(!_0x5f3668['ok'])throw{'status':_0x5f3668['status'],'body':_0x35c44d};return{'status':_0x5f3668[_0x3fb0d3(0x135)],'json':_0x35c44d};}async['login'](_0x490888,_0x255158){const _0x2d5b29=a0_0x4e441a,_0x2505a5=await fetch(this[_0x2d5b29(0x13d)]+_0x2d5b29(0x133),{'method':_0x2d5b29(0x121),'headers':{'Content-Type':_0x2d5b29(0x129)},'body':JSON[_0x2d5b29(0x10f)]({'namespace':this[_0x2d5b29(0x12d)],'userID':_0x490888,'password':_0x255158})}),_0x2ca13a=await _0x2505a5[_0x2d5b29(0x131)]()['catch'](()=>({}));if(!_0x2505a5['ok'])throw{'status':_0x2505a5[_0x2d5b29(0x135)],'body':_0x2ca13a};const _0x4b3731=_0x2ca13a[_0x2d5b29(0x12e)];return this[_0x2d5b29(0x137)][_0x2d5b29(0x10e)]=_0x4b3731,_0x4b3731;}async[a0_0x4e441a(0x109)](){const _0x1c2bf9=a0_0x4e441a;let _0x43d578=[],_0x8e409=null;while(!![]){const {keys:_0xc4ebbb,cursor:_0x383459,list_complete:_0x29e19f}=await this[_0x1c2bf9(0x125)]({'cursor':_0x8e409});_0x43d578[_0x1c2bf9(0x113)](..._0xc4ebbb);if(_0x29e19f)break;_0x8e409=_0x383459;}return _0x43d578;}async[a0_0x4e441a(0x125)]({limit:limit=0x3e8,cursor:_0x27f81f=null}={}){const _0x3b2029=a0_0x4e441a,{items:_0x39d6d6,cursor:_0x5df30d,list_complete:_0x1b79bd}=await this[_0x3b2029(0x122)]({'limit':limit,'cursor':_0x27f81f}),_0x53012c=_0x39d6d6[_0x3b2029(0x136)](_0x507d24=>_0x507d24[_0x3b2029(0x132)]);return{'keys':_0x53012c,'cursor':_0x5df30d,'list_complete':_0x1b79bd};}async[a0_0x4e441a(0x13f)](..._0x31a76f){const _0x7cf297=a0_0x4e441a,_0x1b935e={};let _0x5c0a57=null;while(!![]){const {items:_0x19b8a0,cursor:_0x402024,list_complete:_0x5715aa}=await this[_0x7cf297(0x122)]({'cursor':_0x5c0a57}),_0x7dd39d=_0x31a76f[_0x7cf297(0x11d)]?_0x19b8a0[_0x7cf297(0x130)](_0x259941=>_0x31a76f['some'](_0x323dec=>_0x259941[_0x7cf297(0x132)][_0x7cf297(0x138)](_0x323dec))):_0x19b8a0;await Promise[_0x7cf297(0x11c)](_0x7dd39d['map'](async({name:_0x54d42b,metadata:_0x6fa2f2})=>{const _0x226f27=_0x7cf297,_0xc1bff2=await this[_0x226f27(0x12f)](_0x54d42b);_0x1b935e[_0x54d42b]={'value':_0xc1bff2,'metadata':_0x6fa2f2};}));if(_0x5715aa)break;_0x5c0a57=_0x402024;}return _0x1b935e;}async[a0_0x4e441a(0x122)]({limit:limit=0x3e8,cursor:cursor=null}={}){const _0x2f6afe=a0_0x4e441a;return this['apiFetch'](_0x2f6afe(0x116),_0x2f6afe(0x12a),null,{'limit':limit,'cursor':cursor});}async[a0_0x4e441a(0x126)](_0x18f98c,_0x4d0579){const _0x2da64f=a0_0x4e441a;return this[_0x2da64f(0x13a)]('POST','/set',{'key':_0x18f98c,'value':_0x4d0579});}async[a0_0x4e441a(0x12f)](_0x30a759){const _0xc1419d=a0_0x4e441a;return this[_0xc1419d(0x13a)](_0xc1419d(0x116),_0xc1419d(0x134),null,{'key':_0x30a759});}async['getItemWithMetadata'](_0x582643){const _0xb18e35=a0_0x4e441a;return this['apiFetch'](_0xb18e35(0x116),_0xb18e35(0x119),null,{'key':_0x582643});}async['removeItem'](_0xaf4ae6){const _0x1eec6a=a0_0x4e441a;return this[_0x1eec6a(0x13a)]('DELETE',_0x1eec6a(0x12c),null,{'key':_0xaf4ae6});}async[a0_0x4e441a(0x115)](){const _0x22d648=a0_0x4e441a,_0x277847=await this['keys']();return await Promise['all'](_0x277847['map'](_0x252613=>this[_0x22d648(0x10a)](_0x252613))),null;}async[a0_0x4e441a(0x13a)](_0x3d73b2,_0x8ba63b,_0x34177c=null,_0x514d61={}){const _0x281f92=a0_0x4e441a;_0x514d61={..._0x514d61,'namespace':this['namespace']};const _0x4c2bb5=new URL(''+this['endpoint']+_0x8ba63b);_0x4c2bb5[_0x281f92(0x10b)]=new URLSearchParams(Object['entries'](_0x514d61)[_0x281f92(0x130)](([_0x197296,_0x3ade7c])=>_0x3ade7c!==undefined&&_0x3ade7c!==null))['toString']();const _0xeb0d92={'method':_0x3d73b2,'headers':this[_0x281f92(0x137)]};if(_0x34177c)_0xeb0d92[_0x281f92(0x111)]=JSON['stringify'](_0x34177c);try{const _0xc4e178=await fetch(_0x4c2bb5,_0xeb0d92),_0x20a70b=await _0xc4e178[_0x281f92(0x131)]()[_0x281f92(0x114)](()=>({}));if(!_0xc4e178['ok'])throw{'type':'http-error','status':_0xc4e178['status'],'body':_0x20a70b};return _0x20a70b;}catch(_0x55b077){if(_0x55b077?.[_0x281f92(0x123)]===_0x281f92(0x10c))throw _0x55b077;const _0xf96e7a=_0x55b077?.[_0x281f92(0x117)]||_0x55b077?.[_0x281f92(0x132)]||_0x55b077?.[_0x281f92(0x11f)]||'Unknown\x20network\x20error';throw{'type':_0x281f92(0x139),'detail':_0xf96e7a};}}}