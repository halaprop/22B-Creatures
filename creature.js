const a0_0x4b3d05=a0_0x3ea6;function a0_0x3ea6(_0x5de67d,_0x2fcbbe){const _0x382bc0=a0_0x382b();return a0_0x3ea6=function(_0x3ea652,_0x303153){_0x3ea652=_0x3ea652-0x172;let _0x2f9407=_0x382bc0[_0x3ea652];return _0x2f9407;},a0_0x3ea6(_0x5de67d,_0x2fcbbe);}function a0_0x382b(){const _0x2d2ccc=['1181652zTuZVV','rowCount','creatures','resting','594273ILWolX','rest','80882OzIZxu','Lynx','kCaloriesGainedPerRest','violet','creatureCount','gameOver','873864OSBViV','Mouse','503952aOyHPN','cyan','Falcon','removeCreature','keydown','cout','white','getElementById','Skunk','16beYyWl','chartreuse','grid','creatureAtPosition','toString','crimson','playerCol','kCaloriesGainedPerMeal','Badger','orange','157595XtTCou','move','yellow','takeTurns','filter','writeLine','Owl','gold','padEnd','<br>','drawCharAt','row','tomato','colCount','dCol','calories','positionEquals','dodgerblue','takeTurn','statusString','setStatusLine','map','Rabbit','\x20cals.\x20','Boar','glyph','dRow','erase','playerCalories','orangered','ArrowUp','playerRow','col','Porcupine','find','creatureList','ArrowLeft','contestStatus','length','Squirrel','padStart','turnCount','Turn\x20','eraseCharAt','Raccoon','kCaloriesConsumedPerMove','main-canvas','Hedgehog','3168963clTaIC','draw','Ate\x20the\x20','join','forEach','name','kInitialPlayerCalories','initialCalories','52mvaBhk'];a0_0x382b=function(){return _0x2d2ccc;};return a0_0x382b();}(function(_0x570d08,_0x32b8ef){const _0x1f56ad=a0_0x3ea6,_0x312160=_0x570d08();while(!![]){try{const _0x35477a=-parseInt(_0x1f56ad(0x184))/0x1*(-parseInt(_0x1f56ad(0x173))/0x2)+parseInt(_0x1f56ad(0x1cb))/0x3+-parseInt(_0x1f56ad(0x1c6))/0x4*(parseInt(_0x1f56ad(0x18e))/0x5)+parseInt(_0x1f56ad(0x1c7))/0x6+-parseInt(_0x1f56ad(0x1be))/0x7+parseInt(_0x1f56ad(0x17b))/0x8+parseInt(_0x1f56ad(0x179))/0x9;if(_0x35477a===_0x32b8ef)break;else _0x312160['push'](_0x312160['shift']());}catch(_0x576b84){_0x312160['push'](_0x312160['shift']());}}}(a0_0x382b,0x52f0b));import{ConsoleGrid,Cout}from'./console-grid.js';export class CreaturesApp{static [a0_0x4b3d05(0x1c4)]=0x78;static [a0_0x4b3d05(0x1bb)]=0x5;constructor(){const _0x5dc4c4=a0_0x4b3d05,_0x5359f0={'canvas':document[_0x5dc4c4(0x182)](_0x5dc4c4(0x1bc)),'rowCount':0x14,'colCount':0x1e,'backgroundDots':!![]};this['sleepTimeout']=0x64,this[_0x5dc4c4(0x186)]=new ConsoleGrid(_0x5359f0);const _0x4301cc=document[_0x5dc4c4(0x182)]('cout-lines');this['cout']=new Cout(_0x4301cc),this[_0x5dc4c4(0x1ad)]=0x5,this[_0x5dc4c4(0x18a)]=0x5,this[_0x5dc4c4(0x1aa)]=CreaturesApp['kInitialPlayerCalories'],this[_0x5dc4c4(0x1b7)]=0x0,this[_0x5dc4c4(0x178)]=![],this[_0x5dc4c4(0x1b1)]=new CreatureList(),this[_0x5dc4c4(0x1b1)]['addCreaturesFromFile'](),this['creatureList']['draw'](this['grid']),this[_0x5dc4c4(0x186)][_0x5dc4c4(0x198)](this[_0x5dc4c4(0x1ad)],this[_0x5dc4c4(0x18a)],'@',_0x5dc4c4(0x181)),this['grid'][_0x5dc4c4(0x1a2)](this[_0x5dc4c4(0x1a1)](this[_0x5dc4c4(0x1aa)],'')),this[_0x5dc4c4(0x180)][_0x5dc4c4(0x193)](this['creatureList'][_0x5dc4c4(0x188)]());}[a0_0x4b3d05(0x1a1)](_0x3d5c7b,_0x2a1f35){const _0x28951a=a0_0x4b3d05;return _0x28951a(0x1b8)+this[_0x28951a(0x1b7)]+'.\x20Player\x20has\x20'+_0x3d5c7b+_0x28951a(0x1a5)+_0x2a1f35;}[a0_0x4b3d05(0x17f)](_0xbe30b){const _0x295472=a0_0x4b3d05;if(this[_0x295472(0x178)])return;let _0xa57bd4=![],_0x328826='';this[_0x295472(0x1b1)][_0x295472(0x1a9)](this[_0x295472(0x186)]),this[_0x295472(0x186)][_0x295472(0x1b9)](this[_0x295472(0x1ad)],this[_0x295472(0x18a)]);switch(_0xbe30b){case _0x295472(0x1ac):this[_0x295472(0x1ad)]>0x0&&(_0xa57bd4=!![],this[_0x295472(0x1ad)]--);break;case'ArrowDown':this[_0x295472(0x1ad)]+0x1<this[_0x295472(0x186)][_0x295472(0x1c8)]&&(_0xa57bd4=!![],this[_0x295472(0x1ad)]++);break;case _0x295472(0x1b2):this[_0x295472(0x18a)]>0x0&&(_0xa57bd4=!![],this[_0x295472(0x18a)]--);break;case'ArrowRight':this[_0x295472(0x18a)]+0x1<this[_0x295472(0x186)]['colCount']&&(_0xa57bd4=!![],this[_0x295472(0x18a)]++);break;case'Q':case'q':this[_0x295472(0x178)]=!![];break;default:break;}if(!this[_0x295472(0x178)]){_0xa57bd4&&(this[_0x295472(0x1aa)]-=CreaturesApp[_0x295472(0x1bb)]);this[_0x295472(0x1b1)][_0x295472(0x191)](this['grid'][_0x295472(0x1c8)],this[_0x295472(0x186)][_0x295472(0x19b)]);let _0x25d3ed=this['creatureList']['creatureAtPosition'](this[_0x295472(0x1ad)],this[_0x295472(0x18a)]);_0x25d3ed&&(_0x328826=_0x295472(0x1c0)+_0x25d3ed[_0x295472(0x1c3)],this[_0x295472(0x1aa)]+=_0x25d3ed[_0x295472(0x19d)],this[_0x295472(0x1b1)][_0x295472(0x17e)](_0x25d3ed),this[_0x295472(0x1b1)][_0x295472(0x177)]()==0x0&&(_0x328826='Having\x20eaten\x20everything,\x20player\x20wins!',this[_0x295472(0x178)]=!![])),this[_0x295472(0x1aa)]<=0x0&&(_0x328826='Having\x20starved,\x20player\x20dies.',this[_0x295472(0x178)]=!![]),this[_0x295472(0x1b7)]++;}this['creatureList']['draw'](this['grid']),this[_0x295472(0x186)][_0x295472(0x198)](this[_0x295472(0x1ad)],this[_0x295472(0x18a)],'@','white'),this[_0x295472(0x186)]['setStatusLine'](this[_0x295472(0x1a1)](this[_0x295472(0x1aa)],_0x328826)),this['cout'][_0x295472(0x193)](this[_0x295472(0x1b1)]['toString']());}[a0_0x4b3d05(0x1b3)](){const _0x59d315=a0_0x4b3d05,_0x4dce2=this[_0x59d315(0x1b7)],_0x3656ae=this[_0x59d315(0x1aa)],_0x563dab=this[_0x59d315(0x1b1)]['creatureCount']();return{'turnCount':_0x4dce2,'calories':_0x3656ae,'creatureCount':_0x563dab};}}class Creature{constructor(_0x45c56b){const _0x4c8e1a=a0_0x4b3d05;Object['assign'](this,_0x45c56b),this['initialCalories']=this[_0x4c8e1a(0x19d)];}static ['kCaloriesConsumedPerMove']=0x5;static [a0_0x4b3d05(0x18b)]=0x3c;static [a0_0x4b3d05(0x175)]=0x5;['positionEquals'](_0x1b5676,_0x46b0ce){const _0x16568e=a0_0x4b3d05;return this[_0x16568e(0x199)]==_0x1b5676&&this[_0x16568e(0x1ae)]==_0x46b0ce;}[a0_0x4b3d05(0x1a0)](_0x3ae19c,_0x2f6446){const _0x18c438=a0_0x4b3d05;this['resting']?this[_0x18c438(0x172)]():this[_0x18c438(0x18f)](_0x3ae19c,_0x2f6446);}[a0_0x4b3d05(0x18f)](_0x527471,_0x3f29de){const _0x46b315=a0_0x4b3d05;let _0x517900=this[_0x46b315(0x199)]+this['dRow'];(_0x517900<0x0||_0x517900>=_0x527471)&&(this[_0x46b315(0x1a8)]*=-0x1,_0x517900=this['row']+this[_0x46b315(0x1a8)]);let _0x5da2b8=this['col']+this[_0x46b315(0x19c)];(_0x5da2b8<0x0||_0x5da2b8>=_0x3f29de)&&(this[_0x46b315(0x19c)]*=-0x1,_0x5da2b8=this['col']+this[_0x46b315(0x19c)]),(this[_0x46b315(0x199)]!=_0x517900||this[_0x46b315(0x1ae)]!=_0x5da2b8)&&(this[_0x46b315(0x199)]=_0x517900,this['col']=_0x5da2b8,this['calories']-=Creature['kCaloriesConsumedPerMove'],this[_0x46b315(0x19d)]<=0x0&&(this['resting']=!![]));}[a0_0x4b3d05(0x172)](){const _0x10b4c4=a0_0x4b3d05;this[_0x10b4c4(0x19d)]+=Creature[_0x10b4c4(0x175)],this[_0x10b4c4(0x19d)]>0.75*this[_0x10b4c4(0x1c5)]&&(this[_0x10b4c4(0x1ca)]=![]);}[a0_0x4b3d05(0x1bf)](_0x5abdbc){const _0x3c6763=a0_0x4b3d05;_0x5abdbc['drawCharAt'](this['row'],this[_0x3c6763(0x1ae)],this[_0x3c6763(0x1a7)],this['color']);}['erase'](_0x3388ea){const _0x2b4f79=a0_0x4b3d05;_0x3388ea[_0x2b4f79(0x1b9)](this['row'],this[_0x2b4f79(0x1ae)]);}[a0_0x4b3d05(0x188)](){const _0x160181=a0_0x4b3d05;return this[_0x160181(0x1c3)][_0x160181(0x196)](0xa)+'\x20('+this['glyph']+')\x20'+this[_0x160181(0x19d)][_0x160181(0x188)]()[_0x160181(0x1b6)](0x4);}}class CreatureList{constructor(){}['addCreaturesFromFile'](){const _0x297481=a0_0x4b3d05,_0x4b3a1c=[{'name':_0x297481(0x17a),'glyph':'M','row':0x5,'col':0x2,'dRow':0x1,'dCol':0x1,'calories':0x5a,'color':'aqua'},{'name':_0x297481(0x1a4),'glyph':'R','row':0x8,'col':0x1b,'dRow':0x1,'dCol':-0x1,'calories':0x6e,'color':'green'},{'name':_0x297481(0x1a6),'glyph':'B','row':0x12,'col':0x12,'dRow':-0x1,'dCol':0x0,'calories':0xf0,'color':_0x297481(0x190)},{'name':_0x297481(0x1b5),'glyph':'S','row':0x9,'col':0x4,'dRow':-0x1,'dCol':-0x1,'calories':0x64,'color':_0x297481(0x176)},{'name':'Deer','glyph':'D','row':0xc,'col':0xf,'dRow':0x1,'dCol':0x0,'calories':0x15e,'color':'magenta'},{'name':'Fox','glyph':'F','row':0x6,'col':0x13,'dRow':-0x1,'dCol':0x1,'calories':0x96,'color':_0x297481(0x18d)},{'name':_0x297481(0x1ba),'glyph':'C','row':0xa,'col':0x7,'dRow':0x0,'dCol':0x1,'calories':0x78,'color':_0x297481(0x189)},{'name':_0x297481(0x194),'glyph':'O','row':0x3,'col':0x19,'dRow':0x1,'dCol':-0x1,'calories':0x8c,'color':'deepskyblue'},{'name':_0x297481(0x1bd),'glyph':'H','row':0xf,'col':0xa,'dRow':-0x1,'dCol':0x1,'calories':0x46,'color':_0x297481(0x185)},{'name':_0x297481(0x18c),'glyph':'A','row':0x7,'col':0xc,'dRow':0x1,'dCol':0x1,'calories':0xb4,'color':_0x297481(0x195)},{'name':_0x297481(0x1af),'glyph':'P','row':0x12,'col':0x5,'dRow':0x0,'dCol':-0x1,'calories':0x82,'color':_0x297481(0x19a)},{'name':_0x297481(0x183),'glyph':'K','row':0xe,'col':0x17,'dRow':0x1,'dCol':0x0,'calories':0x64,'color':_0x297481(0x17c)},{'name':_0x297481(0x174),'glyph':'L','row':0x4,'col':0x8,'dRow':-0x1,'dCol':0x0,'calories':0xd2,'color':_0x297481(0x19f)},{'name':_0x297481(0x17d),'glyph':'N','row':0x1,'col':0x1d,'dRow':0x0,'dCol':0x1,'calories':0xa0,'color':_0x297481(0x1ab)}];this['creatures']=_0x4b3a1c[_0x297481(0x1a3)](_0x30c9d4=>new Creature(_0x30c9d4));}[a0_0x4b3d05(0x1bf)](_0x1f4044){this['creatures']['forEach'](_0x5e7b30=>_0x5e7b30['draw'](_0x1f4044));}[a0_0x4b3d05(0x1a9)](_0x3d0bef){const _0x4c81ae=a0_0x4b3d05;this[_0x4c81ae(0x1c9)]['forEach'](_0x4d7aac=>_0x4d7aac['erase'](_0x3d0bef));}[a0_0x4b3d05(0x191)](_0x257dff,_0x51ede7){const _0x423e9c=a0_0x4b3d05;this[_0x423e9c(0x1c9)][_0x423e9c(0x1c2)](_0x8ece66=>_0x8ece66[_0x423e9c(0x1a0)](_0x257dff,_0x51ede7));}[a0_0x4b3d05(0x187)](_0x5439b5,_0x29c3f5){const _0x3beaa4=a0_0x4b3d05;return this[_0x3beaa4(0x1c9)][_0x3beaa4(0x1b0)](_0x394e49=>_0x394e49[_0x3beaa4(0x19e)](_0x5439b5,_0x29c3f5));}[a0_0x4b3d05(0x17e)](_0x47b2c0){const _0x345d3a=a0_0x4b3d05;this['creatures']=this[_0x345d3a(0x1c9)][_0x345d3a(0x192)](_0x5646dd=>_0x5646dd!=_0x47b2c0);}['creatureCount'](){const _0x1de2ab=a0_0x4b3d05;return this[_0x1de2ab(0x1c9)][_0x1de2ab(0x1b4)];}[a0_0x4b3d05(0x188)](){const _0x251b6c=a0_0x4b3d05;return this[_0x251b6c(0x1c9)][_0x251b6c(0x1a3)](_0x392f02=>_0x392f02[_0x251b6c(0x188)]())[_0x251b6c(0x1c1)](_0x251b6c(0x197));}}