const a0_0x4716da=a0_0xdf53;(function(_0x2ac964,_0x156b9a){const _0x4d1dbf=a0_0xdf53,_0x1cee4a=_0x2ac964();while(!![]){try{const _0x5269ec=-parseInt(_0x4d1dbf(0x1a5))/0x1*(parseInt(_0x4d1dbf(0x1b7))/0x2)+parseInt(_0x4d1dbf(0x1c9))/0x3*(-parseInt(_0x4d1dbf(0x1a8))/0x4)+parseInt(_0x4d1dbf(0x1ca))/0x5*(-parseInt(_0x4d1dbf(0x1e9))/0x6)+-parseInt(_0x4d1dbf(0x1a3))/0x7+-parseInt(_0x4d1dbf(0x1b5))/0x8+parseInt(_0x4d1dbf(0x1ec))/0x9*(-parseInt(_0x4d1dbf(0x1da))/0xa)+parseInt(_0x4d1dbf(0x1e4))/0xb;if(_0x5269ec===_0x156b9a)break;else _0x1cee4a['push'](_0x1cee4a['shift']());}catch(_0x268b3e){_0x1cee4a['push'](_0x1cee4a['shift']());}}}(a0_0x5a92,0x94951));import{ConsoleGrid,Cout}from'./console-grid.js';export class SnakeApp{constructor(){const _0xf4cb53=a0_0xdf53,_0x17c68c={'canvas':document[_0xf4cb53(0x1ba)](_0xf4cb53(0x1c3)),'rowCount':0x14,'colCount':0x1e,'backgroundDots':!![]};this['sleepTimeout']=0x64,this['grid']=new ConsoleGrid(_0x17c68c);const _0x4e2e5e=document[_0xf4cb53(0x1ba)]('cout-lines');this[_0xf4cb53(0x1dc)]=new Cout(_0x4e2e5e),this[_0xf4cb53(0x1b4)]=0x0,this[_0xf4cb53(0x1e1)]=![],this[_0xf4cb53(0x1b9)]=new Snake(),this[_0xf4cb53(0x1b9)]['drawChars'](this[_0xf4cb53(0x1af)]),Candy['seedRandom'](),this[_0xf4cb53(0x1d6)]=Candy['randomCandy'](this[_0xf4cb53(0x1b9)],this[_0xf4cb53(0x1af)][_0xf4cb53(0x1c4)],this[_0xf4cb53(0x1af)][_0xf4cb53(0x1b0)]),this[_0xf4cb53(0x1d6)][_0xf4cb53(0x1c5)](this[_0xf4cb53(0x1af)]),this[_0xf4cb53(0x1af)][_0xf4cb53(0x1de)](this[_0xf4cb53(0x1be)]());}[a0_0x4716da(0x1df)](){const _0x280e3b=a0_0x4716da,_0x51a6ec=this[_0x280e3b(0x1b4)],_0x3221f2=this[_0x280e3b(0x1b9)]['length']();return _0x51a6ec==0x0?0x0:0x1*_0x3221f2*_0x3221f2/_0x51a6ec;}[a0_0x4716da(0x1be)](_0x683774){const _0x85e677=a0_0x4716da;let _0x25c0ac=_0x85e677(0x1b2)+this[_0x85e677(0x1b9)][_0x85e677(0x1b6)]()+_0x85e677(0x1ab)+this[_0x85e677(0x1b4)]+_0x85e677(0x1e2)+this[_0x85e677(0x1df)]()[_0x85e677(0x1ac)](0x3);if(_0x683774)_0x25c0ac+='.\x20'+_0x683774;return _0x25c0ac;}['keydown'](_0x375cfa){const _0x3ba3db=a0_0x4716da;let _0x363fd9='';switch(_0x375cfa){case _0x3ba3db(0x1a9):case _0x3ba3db(0x1ce):case'ArrowUp':case _0x3ba3db(0x1e6):this[_0x3ba3db(0x1b9)][_0x3ba3db(0x1bb)](_0x375cfa,this['grid'],this['candy'][_0x3ba3db(0x1e0)],this[_0x3ba3db(0x1d6)]['col']);break;case'Q':case'q':this['gameOver']=!![];default:break;}!this['gameOver']&&(this[_0x3ba3db(0x1b9)][_0x3ba3db(0x1d7)](this[_0x3ba3db(0x1af)])?(this[_0x3ba3db(0x1e1)]=!![],_0x363fd9=_0x3ba3db(0x1b8)):(this[_0x3ba3db(0x1b9)][_0x3ba3db(0x1b1)](this[_0x3ba3db(0x1af)]),this['snake'][_0x3ba3db(0x1a4)](this[_0x3ba3db(0x1d6)][_0x3ba3db(0x1e0)],this[_0x3ba3db(0x1d6)]['col'])&&(this[_0x3ba3db(0x1b9)][_0x3ba3db(0x1bf)](this[_0x3ba3db(0x1d6)][_0x3ba3db(0x1ad)]),this[_0x3ba3db(0x1b9)][_0x3ba3db(0x1d5)]=this[_0x3ba3db(0x1d6)]['color'],this[_0x3ba3db(0x1b9)][_0x3ba3db(0x1d4)](this[_0x3ba3db(0x1af)]),this[_0x3ba3db(0x1d6)]=Candy['randomCandy'](this[_0x3ba3db(0x1b9)],this[_0x3ba3db(0x1af)][_0x3ba3db(0x1c4)],this[_0x3ba3db(0x1af)][_0x3ba3db(0x1b0)]),this[_0x3ba3db(0x1d6)][_0x3ba3db(0x1c5)](this[_0x3ba3db(0x1af)]))),this[_0x3ba3db(0x1b4)]++,this[_0x3ba3db(0x1af)][_0x3ba3db(0x1de)](this[_0x3ba3db(0x1be)](_0x363fd9))),this[_0x3ba3db(0x1af)][_0x3ba3db(0x1de)](this[_0x3ba3db(0x1be)](_0x363fd9));}}function a0_0xdf53(_0x2d3715,_0x1a6fd2){const _0x5a9214=a0_0x5a92();return a0_0xdf53=function(_0xdf53c6,_0x109eb1){_0xdf53c6=_0xdf53c6-0x1a1;let _0x1d30c2=_0x5a9214[_0xdf53c6];return _0x1d30c2;},a0_0xdf53(_0x2d3715,_0x1a6fd2);}class ListNode{constructor(_0x1b4ec2,_0x4d5c6f=null){const _0x2c76ac=a0_0x4716da;this[_0x2c76ac(0x1eb)]=_0x1b4ec2,this['next']=_0x4d5c6f;}}class LinkedList{constructor(){const _0x4dd89e=a0_0x4716da;this[_0x4dd89e(0x1c7)]=null;}[a0_0x4716da(0x1c2)](_0x10887b){const _0x352d02=a0_0x4716da;this['head']=new ListNode(_0x10887b,this[_0x352d02(0x1c7)]);}[a0_0x4716da(0x1d2)](){const _0x51bca1=a0_0x4716da;this[_0x51bca1(0x1c7)]&&(this[_0x51bca1(0x1c7)]=this['head'][_0x51bca1(0x1a6)]);}['pushBack'](_0x11b64b){const _0x26838d=a0_0x4716da,_0x267cf2=this['tail'](),_0x2abc37=new ListNode(_0x11b64b);_0x267cf2?_0x267cf2[_0x26838d(0x1a6)]=_0x2abc37:this[_0x26838d(0x1c7)]=_0x2abc37;}[a0_0x4716da(0x1db)](){const _0x448e8b=a0_0x4716da,_0x1f0f36=this['tail']();if(_0x1f0f36){if(this[_0x448e8b(0x1c7)]==_0x1f0f36)this[_0x448e8b(0x1c7)]=null;else{let _0x9d671=this[_0x448e8b(0x1c7)];while(_0x9d671[_0x448e8b(0x1a6)]!=_0x1f0f36)_0x9d671=_0x9d671[_0x448e8b(0x1a6)];_0x9d671['next']=null;}}}[a0_0x4716da(0x1bc)](){const _0x199fa4=a0_0x4716da;let _0x3f29ed=null;for(let _0x3660ae=this[_0x199fa4(0x1c7)];_0x3660ae;_0x3660ae=_0x3660ae[_0x199fa4(0x1a6)]){_0x3f29ed=_0x3660ae;}return _0x3f29ed;}[a0_0x4716da(0x1b6)](){const _0x583a27=a0_0x4716da;let _0x1de08c=0x0;for(let _0x128280=this['head'];_0x128280;_0x128280=_0x128280[_0x583a27(0x1a6)]){_0x1de08c++;}return _0x1de08c;}}class Snake extends LinkedList{constructor(){const _0x3293f3=a0_0x4716da;super(),this[_0x3293f3(0x1ad)]=0x0,this[_0x3293f3(0x1d5)]=_0x3293f3(0x1ea),this[_0x3293f3(0x1d0)]='o',this[_0x3293f3(0x1a2)]='@',this[_0x3293f3(0x1e8)]=0x0,this[_0x3293f3(0x1e5)]=0x1,this[_0x3293f3(0x1cf)]({'row':0x5,'col':0x5}),this[_0x3293f3(0x1cf)]({'row':0x5,'col':0x4}),this[_0x3293f3(0x1cf)]({'row':0x5,'col':0x3});}['willCrash'](_0x586b76){const _0x49a451=a0_0x4716da,_0x1124af=this[_0x49a451(0x1c7)]['value'][_0x49a451(0x1e0)]+this[_0x49a451(0x1e8)],_0xa10a3a=this[_0x49a451(0x1c7)][_0x49a451(0x1eb)]['col']+this[_0x49a451(0x1e5)],_0x40c83a=_0x1124af>=0x0&&_0x1124af<_0x586b76[_0x49a451(0x1c4)]&&_0xa10a3a>=0x0&&_0xa10a3a<_0x586b76[_0x49a451(0x1b0)];return!_0x40c83a||this['intersects'](_0x1124af,_0xa10a3a);}[a0_0x4716da(0x1a4)](_0x7bbc9a,_0x55e91a){const _0xfcf9e0=a0_0x4716da;return this[_0xfcf9e0(0x1c7)]['value'][_0xfcf9e0(0x1e0)]==_0x7bbc9a&&this['head'][_0xfcf9e0(0x1eb)][_0xfcf9e0(0x1e3)]==_0x55e91a;}['intersects'](_0x300f2d,_0x400667){const _0x392b87=a0_0x4716da;let _0x5560ff=![],_0x7cac44=this['head'];while(_0x7cac44){if(_0x7cac44['value']['row']==_0x300f2d&&_0x7cac44['value'][_0x392b87(0x1e3)]==_0x400667){_0x5560ff=!![];break;}_0x7cac44=_0x7cac44[_0x392b87(0x1a6)];}return _0x5560ff;}[a0_0x4716da(0x1d4)](_0x4ac4fc){const _0x4b5ab7=a0_0x4716da;let _0xaaab9f=this[_0x4b5ab7(0x1a2)];for(let _0x1bfa95=this['head'];_0x1bfa95;_0x1bfa95=_0x1bfa95['next']){_0x4ac4fc[_0x4b5ab7(0x1d8)](_0x1bfa95[_0x4b5ab7(0x1eb)][_0x4b5ab7(0x1e0)],_0x1bfa95[_0x4b5ab7(0x1eb)][_0x4b5ab7(0x1e3)],_0xaaab9f,this['color']),_0xaaab9f=this['glyph'];}}['steer'](_0x5d5759,_0x5b2186,_0x572f63,_0x1a9e79){const _0x116d24=a0_0x4716da;this[_0x116d24(0x1e8)]=0x0,this[_0x116d24(0x1e5)]=0x0;switch(_0x5d5759){case _0x116d24(0x1a9):this[_0x116d24(0x1e5)]=-0x1;break;case _0x116d24(0x1ce):this[_0x116d24(0x1e5)]=0x1;break;case _0x116d24(0x1c0):this[_0x116d24(0x1e8)]=-0x1;break;case'ArrowDown':this[_0x116d24(0x1e8)]=0x1;break;default:break;}}['step'](_0x5b058b){const _0x36ad30=a0_0x4716da;let _0x52e453=this[_0x36ad30(0x1c7)]['value']['row']+this['dRow'],_0x309f22=this[_0x36ad30(0x1c7)][_0x36ad30(0x1eb)][_0x36ad30(0x1e3)]+this[_0x36ad30(0x1e5)];_0x5b058b['drawCharAt'](this[_0x36ad30(0x1c7)][_0x36ad30(0x1eb)][_0x36ad30(0x1e0)],this[_0x36ad30(0x1c7)][_0x36ad30(0x1eb)]['col'],this[_0x36ad30(0x1d0)],this[_0x36ad30(0x1d5)]),this[_0x36ad30(0x1c2)]({'row':_0x52e453,'col':_0x309f22}),_0x5b058b[_0x36ad30(0x1d8)](_0x52e453,_0x309f22,this[_0x36ad30(0x1a2)],this[_0x36ad30(0x1d5)]);if(this[_0x36ad30(0x1ad)]>0x0)this[_0x36ad30(0x1ad)]--;else{const _0x3db2e4=this[_0x36ad30(0x1bc)]();_0x5b058b[_0x36ad30(0x1a7)](_0x3db2e4['value'][_0x36ad30(0x1e0)],_0x3db2e4['value'][_0x36ad30(0x1e3)]),this[_0x36ad30(0x1db)]();}}[a0_0x4716da(0x1bf)](_0x2a623d){const _0x5cf938=a0_0x4716da;this[_0x5cf938(0x1ad)]+=_0x2a623d;}}class Candy{static[a0_0x4716da(0x1cd)](){const _0x31744e=a0_0x4716da;this[_0x31744e(0x1dd)]=new RandANSI();}constructor(_0x58dc6b){Object['assign'](this,_0x58dc6b);}static[a0_0x4716da(0x1b3)](_0x254d9e,_0x158cc5,_0x3fdd7e){const _0x1b65f4=a0_0x4716da,{row:_0x108310,col:_0x613644}=this[_0x1b65f4(0x1bd)](_0x254d9e,_0x158cc5,_0x3fdd7e),_0x30704b=this[_0x1b65f4(0x1a1)](),_0x364cdc=Candy[_0x1b65f4(0x1dd)]['randBetween'](0x1,0xa),_0xcedeb3=''+_0x364cdc;return new Candy({'row':_0x108310,'col':_0x613644,'calories':_0x364cdc,'glyph':_0xcedeb3,'color':_0x30704b});}static[a0_0x4716da(0x1bd)](_0x101a77,_0x4580f3,_0x295225){const _0x5d260b=a0_0x4716da;let _0x1aff90,_0x5531cb;do{_0x1aff90=Candy[_0x5d260b(0x1dd)][_0x5d260b(0x1cc)](0x0,_0x4580f3),_0x5531cb=Candy[_0x5d260b(0x1dd)][_0x5d260b(0x1cc)](0x0,_0x295225);}while(_0x101a77[_0x5d260b(0x1aa)](_0x1aff90,_0x5531cb));return{'row':_0x1aff90,'col':_0x5531cb};}static[a0_0x4716da(0x1a1)](){const _0xed4134=a0_0x4716da,_0x5bf51a=[_0xed4134(0x1c6),_0xed4134(0x1ae),_0xed4134(0x1d3),_0xed4134(0x1c8),_0xed4134(0x1cb),_0xed4134(0x1d1),'pink'];return _0x5bf51a[Candy[_0xed4134(0x1dd)][_0xed4134(0x1cc)](0x0,_0x5bf51a[_0xed4134(0x1b6)])];}[a0_0x4716da(0x1c5)](_0x5b63f0){const _0xf53f05=a0_0x4716da;_0x5b63f0[_0xf53f05(0x1d8)](this['row'],this[_0xf53f05(0x1e3)],this[_0xf53f05(0x1d0)],this[_0xf53f05(0x1d5)]);}}function a0_0x5a92(){const _0xf4975b=['dRow','1348446WEqxKq','white','value','9JSHfJf','randomColor','headGlyph','6804077xJmoPX','headIntersects','1161aSJNiA','next','eraseCharAt','537160SmVgBa','ArrowLeft','intersects','\x20Turns:\x20','toFixed','calories','lime','grid','colCount','step','Length:\x20','randomCandy','turnCount','4781592uxYOPY','length','1206skXuNA','Ouch,\x20my\x20nose!','snake','getElementById','steer','tail','randomPosition','statusString','eat','ArrowUp','seed','pushFront','main-canvas','rowCount','draw','red','head','cyan','3awjopc','5EweEnI','magenta','randBetween','seedRandom','ArrowRight','pushBack','glyph','orange','popFront','yellow','drawChars','color','candy','willCrash','drawCharAt','setSeed','8702110UcfCAp','popBack','cout','Random','setStatusLine','metric','row','gameOver','.\x20Metric:\x20','col','45183908fPNioz','dCol','ArrowDown','rand'];a0_0x5a92=function(){return _0xf4975b;};return a0_0x5a92();}class RandANSI{constructor(_0x147c89=0x1){const _0x4fc3f2=a0_0x4716da;this[_0x4fc3f2(0x1c1)]=_0x147c89;}[a0_0x4716da(0x1d9)](_0x43208d){const _0x6d7f95=a0_0x4716da;this[_0x6d7f95(0x1c1)]=_0x43208d;}[a0_0x4716da(0x1e7)](){const _0xb12196=a0_0x4716da;return(this[_0xb12196(0x1c1)]=Number((BigInt(this[_0xb12196(0x1c1)])*0x41c64e6dn+0x3039n)%0x80000000n))>>0x10&0x7fff;}[a0_0x4716da(0x1cc)](_0x3e1675,_0x9a7d5e){const _0x4544ea=a0_0x4716da;return _0x3e1675+this[_0x4544ea(0x1e7)]()%(_0x9a7d5e-_0x3e1675);}}