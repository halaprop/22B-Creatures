function a0_0x382b(){const _0x55cbb7=['924102zzcLQM','json','stringify','48RCsajg','name','some','/delete','endpoint','145430zoBBat','setItem','length','search','body','301798ZKxCDT','198ClObay','/register','catch','toString','login','all','startsWith','map','/list','apiFetch','POST','302976UGholj','Unknown\x20network\x20error','keys','getItem','list','220QmCmLb','register','removeItem','getNamespace','push','http-error','clear','151320oaBZaf','DELETE','requestHeaders','message','status','Authorization','code','namespace','application/json','token','GET','getItemWithMetadata','https://remote-storage.dan-5d7.workers.dev/v1','keysPaged','7830IOFooQ','/login','635483YgleGT','filter','type'];a0_0x382b=function(){return _0x55cbb7;};return a0_0x382b();}const a0_0x399431=a0_0xce3b;(function(_0x1a8447,_0x33dd47){const _0x292939=a0_0xce3b,_0x449657=_0x1a8447();while(!![]){try{const _0x41c685=parseInt(_0x292939(0x10c))/0x1+parseInt(_0x292939(0x10f))/0x2+-parseInt(_0x292939(0x128))/0x3+-parseInt(_0x292939(0x12d))/0x4*(parseInt(_0x292939(0x10a))/0x5)+parseInt(_0x292939(0x134))/0x6+-parseInt(_0x292939(0x11c))/0x7*(parseInt(_0x292939(0x112))/0x8)+parseInt(_0x292939(0x11d))/0x9*(-parseInt(_0x292939(0x117))/0xa);if(_0x41c685===_0x33dd47)break;else _0x449657['push'](_0x449657['shift']());}catch(_0x256595){_0x449657['push'](_0x449657['shift']());}}}(a0_0x382b,0x5728a));function a0_0xce3b(_0xeeb75a,_0xf1369c){const _0x382b91=a0_0x382b();return a0_0xce3b=function(_0xce3bf5,_0x3327de){_0xce3bf5=_0xce3bf5-0x109;let _0x57345b=_0x382b91[_0xce3bf5];return _0x57345b;},a0_0xce3b(_0xeeb75a,_0xf1369c);}export class RemoteStorage{constructor(_0x489f79,_0x2d9d54){const _0xcaa90b=a0_0xce3b;this[_0xcaa90b(0x13b)]=_0x489f79,this[_0xcaa90b(0x116)]=_0xcaa90b(0x140),this[_0xcaa90b(0x136)]={'Content-Type':'application/json'};if(_0x2d9d54)this['requestHeaders'][_0xcaa90b(0x139)]=_0x2d9d54;}async[a0_0x399431(0x12e)](_0x5e6edb,_0x27a3e7){const _0x1270e9=a0_0x399431,_0x4a994a=await fetch(this[_0x1270e9(0x116)]+_0x1270e9(0x11e),{'method':_0x1270e9(0x127),'headers':{'Content-Type':_0x1270e9(0x13c)},'body':JSON['stringify']({'userID':_0x5e6edb,'password':_0x27a3e7})}),_0x3721cc=await _0x4a994a[_0x1270e9(0x110)]()[_0x1270e9(0x11f)](()=>({}));if(!_0x4a994a['ok'])throw{'status':_0x4a994a[_0x1270e9(0x138)],'body':_0x3721cc};return{'status':_0x4a994a['status'],'json':_0x3721cc};}async[a0_0x399431(0x121)](_0x4b3b94,_0x451dc5){const _0x40759e=a0_0x399431,_0x409cbe=await fetch(this[_0x40759e(0x116)]+_0x40759e(0x10b),{'method':_0x40759e(0x127),'headers':{'Content-Type':_0x40759e(0x13c)},'body':JSON[_0x40759e(0x111)]({'namespace':this[_0x40759e(0x13b)],'userID':_0x4b3b94,'password':_0x451dc5})}),_0x2194d5=await _0x409cbe[_0x40759e(0x110)]()[_0x40759e(0x11f)](()=>({}));if(!_0x409cbe['ok'])throw{'status':_0x409cbe['status'],'body':_0x2194d5};const _0x49e6a7=_0x2194d5[_0x40759e(0x13d)];return this[_0x40759e(0x136)][_0x40759e(0x139)]=_0x49e6a7,_0x49e6a7;}async[a0_0x399431(0x12a)](){const _0x5efeac=a0_0x399431;let _0x7f3136=[],_0x1fa0f1=null;while(!![]){const {keys:_0x98df1b,cursor:_0x4fbeda,list_complete:_0x17652e}=await this[_0x5efeac(0x109)]({'cursor':_0x1fa0f1});_0x7f3136[_0x5efeac(0x131)](..._0x98df1b);if(_0x17652e)break;_0x1fa0f1=_0x4fbeda;}return _0x7f3136;}async[a0_0x399431(0x109)]({limit:limit=0x3e8,cursor:_0x4c9a58=null}={}){const _0x42d4db=a0_0x399431,{items:_0x58b607,cursor:_0x594d9f,list_complete:_0x4046ea}=await this[_0x42d4db(0x12c)]({'limit':limit,'cursor':_0x4c9a58}),_0x19de50=_0x58b607[_0x42d4db(0x124)](_0x1013a2=>_0x1013a2[_0x42d4db(0x113)]);return{'keys':_0x19de50,'cursor':_0x594d9f,'list_complete':_0x4046ea};}async[a0_0x399431(0x130)](..._0x359df2){const _0x23136e=a0_0x399431,_0x3a1c7c={};let _0x235953=null;while(!![]){const {items:_0x235e97,cursor:_0x2dc104,list_complete:_0x32b301}=await this['list']({'cursor':_0x235953}),_0xebaf2d=_0x359df2[_0x23136e(0x119)]?_0x235e97[_0x23136e(0x10d)](_0x3a805b=>_0x359df2[_0x23136e(0x114)](_0x3e7b86=>_0x3a805b['name'][_0x23136e(0x123)](_0x3e7b86))):_0x235e97;await Promise[_0x23136e(0x122)](_0xebaf2d['map'](async({name:_0x2dde06,metadata:_0x4bca04})=>{const _0x322b66=await this['getItem'](_0x2dde06);_0x3a1c7c[_0x2dde06]={'value':_0x322b66,'metadata':_0x4bca04};}));if(_0x32b301)break;_0x235953=_0x2dc104;}return _0x3a1c7c;}async[a0_0x399431(0x12c)]({limit:limit=0x3e8,cursor:cursor=null}={}){const _0x56d8eb=a0_0x399431;return this['apiFetch'](_0x56d8eb(0x13e),_0x56d8eb(0x125),null,{'limit':limit,'cursor':cursor});}async[a0_0x399431(0x118)](_0x96cbc6,_0x482dc3){return this['apiFetch']('POST','/set',{'key':_0x96cbc6,'value':_0x482dc3});}async[a0_0x399431(0x12b)](_0x3c442e){const _0x400d21=a0_0x399431;return this[_0x400d21(0x126)]('GET','/get',null,{'key':_0x3c442e});}async[a0_0x399431(0x13f)](_0xbe59b6){const _0x579f39=a0_0x399431;return this[_0x579f39(0x126)](_0x579f39(0x13e),'/getWithMetadata',null,{'key':_0xbe59b6});}async[a0_0x399431(0x12f)](_0x41122f){const _0x19195b=a0_0x399431;return this[_0x19195b(0x126)](_0x19195b(0x135),_0x19195b(0x115),null,{'key':_0x41122f});}async[a0_0x399431(0x133)](){const _0x1add19=a0_0x399431,_0x48617b=await this[_0x1add19(0x12a)]();return await Promise['all'](_0x48617b[_0x1add19(0x124)](_0x1eebe2=>this['removeItem'](_0x1eebe2))),null;}async[a0_0x399431(0x126)](_0x189761,_0x36674a,_0x120897=null,_0x1c1f63={}){const _0x848b5=a0_0x399431;_0x1c1f63={..._0x1c1f63,'namespace':this[_0x848b5(0x13b)]};const _0x55f510=new URL(''+this['endpoint']+_0x36674a);_0x55f510[_0x848b5(0x11a)]=new URLSearchParams(Object['entries'](_0x1c1f63)[_0x848b5(0x10d)](([_0x2708a8,_0x3f2dc4])=>_0x3f2dc4!==undefined&&_0x3f2dc4!==null))[_0x848b5(0x120)]();const _0x5073b4={'method':_0x189761,'headers':this['requestHeaders']};if(_0x120897)_0x5073b4[_0x848b5(0x11b)]=JSON[_0x848b5(0x111)](_0x120897);try{const _0x37b085=await fetch(_0x55f510,_0x5073b4),_0x12fb12=await _0x37b085[_0x848b5(0x110)]()[_0x848b5(0x11f)](()=>({}));if(!_0x37b085['ok'])throw{'type':'http-error','status':_0x37b085['status'],'body':_0x12fb12};return _0x12fb12;}catch(_0x10fa5a){if(_0x10fa5a?.[_0x848b5(0x10e)]===_0x848b5(0x132))throw _0x10fa5a;const _0x40ce25=_0x10fa5a?.[_0x848b5(0x137)]||_0x10fa5a?.[_0x848b5(0x113)]||_0x10fa5a?.[_0x848b5(0x13a)]||_0x848b5(0x129);throw{'type':'network-error','detail':_0x40ce25};}}}