const a0_0x2de122=a0_0x13ee;(function(_0x31e576,_0x8dcec9){const _0x266211=a0_0x13ee,_0x4342e6=_0x31e576();while(!![]){try{const _0x401689=parseInt(_0x266211(0xb1))/0x1+-parseInt(_0x266211(0xbd))/0x2*(-parseInt(_0x266211(0xa2))/0x3)+-parseInt(_0x266211(0x8d))/0x4+-parseInt(_0x266211(0x9b))/0x5*(-parseInt(_0x266211(0x95))/0x6)+-parseInt(_0x266211(0xad))/0x7+-parseInt(_0x266211(0xcc))/0x8+-parseInt(_0x266211(0xc1))/0x9*(parseInt(_0x266211(0xc6))/0xa);if(_0x401689===_0x8dcec9)break;else _0x4342e6['push'](_0x4342e6['shift']());}catch(_0xa3af9b){_0x4342e6['push'](_0x4342e6['shift']());}}}(a0_0x4630,0x51f88));import{ConsoleGrid,Cout}from'./console-grid.js';export class SnakeApp{constructor(){const _0x5a4f69=a0_0x13ee,_0x3f6bed={'canvas':document[_0x5a4f69(0xb9)]('main-canvas'),'rowCount':0x14,'colCount':0x1e,'backgroundDots':!![]};this[_0x5a4f69(0xba)]=0x64,this[_0x5a4f69(0xbb)]=new ConsoleGrid(_0x3f6bed);const _0x185448=document[_0x5a4f69(0xb9)]('cout-lines');this['cout']=new Cout(_0x185448),this[_0x5a4f69(0xaa)]=0x0,this[_0x5a4f69(0xab)]=![],this['snake']=new Snake(),this[_0x5a4f69(0xb7)][_0x5a4f69(0xaf)](this['grid']),Candy['seedRandom'](),this[_0x5a4f69(0xa6)]=Candy[_0x5a4f69(0x9a)](this['snake'],this[_0x5a4f69(0xbb)]['rowCount'],this[_0x5a4f69(0xbb)][_0x5a4f69(0xc2)]),this['candy'][_0x5a4f69(0x9f)](this['grid']),this[_0x5a4f69(0xbb)][_0x5a4f69(0xa5)](this[_0x5a4f69(0xb0)]());}['metric'](){const _0x52caf3=a0_0x13ee,_0x25570c=this[_0x52caf3(0xaa)],_0xc5841a=this[_0x52caf3(0xb7)]['length']();return _0x25570c==0x0?0x0:0x1*_0xc5841a*_0xc5841a/_0x25570c;}[a0_0x2de122(0xb0)](_0x5abcc7){const _0x324ca9=a0_0x2de122;let _0x18c64d=_0x324ca9(0xc4)+this[_0x324ca9(0xb7)][_0x324ca9(0x8a)]()+_0x324ca9(0xa0)+this[_0x324ca9(0xaa)]+_0x324ca9(0xc5)+this['metric']()['toFixed'](0x3);if(_0x5abcc7)_0x18c64d+='.\x20'+_0x5abcc7;return _0x18c64d;}[a0_0x2de122(0x98)](_0x5dd03a){const _0x27bd8a=a0_0x2de122;let _0x59f3b9='';switch(_0x5dd03a){case _0x27bd8a(0x91):case _0x27bd8a(0xbe):case _0x27bd8a(0xc8):case _0x27bd8a(0xb4):this[_0x27bd8a(0xb7)]['steer'](_0x5dd03a,this[_0x27bd8a(0xbb)],this['candy'][_0x27bd8a(0xbf)],this[_0x27bd8a(0xa6)][_0x27bd8a(0x99)]);break;case'Q':case'q':this[_0x27bd8a(0xab)]=!![],_0x59f3b9='Player\x20quit';break;default:break;}!this[_0x27bd8a(0xab)]&&(this[_0x27bd8a(0xb7)]['willCrash'](this[_0x27bd8a(0xbb)])?(this[_0x27bd8a(0xab)]=!![],_0x59f3b9='Ouch,\x20my\x20nose!'):(this[_0x27bd8a(0xb7)][_0x27bd8a(0x8b)](this[_0x27bd8a(0xbb)]),this['turnCount']++,this[_0x27bd8a(0xb7)][_0x27bd8a(0xcb)](this[_0x27bd8a(0xa6)][_0x27bd8a(0xbf)],this[_0x27bd8a(0xa6)]['col'])&&(this['snake'][_0x27bd8a(0xac)](this[_0x27bd8a(0xa6)][_0x27bd8a(0xa8)]),this[_0x27bd8a(0xb7)][_0x27bd8a(0x96)]=this[_0x27bd8a(0xa6)]['color'],this[_0x27bd8a(0xb7)][_0x27bd8a(0xaf)](this[_0x27bd8a(0xbb)]),this[_0x27bd8a(0xb7)]['length']()<this[_0x27bd8a(0xbb)][_0x27bd8a(0xa3)]*this['grid'][_0x27bd8a(0xc2)]?(this[_0x27bd8a(0xa6)]=Candy['randomCandy'](this[_0x27bd8a(0xb7)],this[_0x27bd8a(0xbb)][_0x27bd8a(0xa3)],this[_0x27bd8a(0xbb)][_0x27bd8a(0xc2)]),this[_0x27bd8a(0xa6)][_0x27bd8a(0x9f)](this[_0x27bd8a(0xbb)])):(this[_0x27bd8a(0xab)]=!![],_0x59f3b9='Board\x20is\x20full!')))),this[_0x27bd8a(0xbb)][_0x27bd8a(0xa5)](this[_0x27bd8a(0xb0)](_0x59f3b9));}[a0_0x2de122(0x97)](){const _0x53ebe2=a0_0x2de122,_0x17067d=this[_0x53ebe2(0xaa)],_0x572696=this['snake'][_0x53ebe2(0x8a)](),_0x1e47a5=this[_0x53ebe2(0xb2)]();return{'turnCount':_0x17067d,'length':_0x572696,'metric':_0x1e47a5};}}class ListNode{constructor(_0xeb7839,_0x5ecc42=null){const _0x518a1e=a0_0x2de122;this[_0x518a1e(0x90)]=_0xeb7839,this['next']=_0x5ecc42;}}class LinkedList{constructor(){this['head']=null;}[a0_0x2de122(0xb8)](_0x53293a){const _0x19afca=a0_0x2de122;this[_0x19afca(0xc7)]=new ListNode(_0x53293a,this[_0x19afca(0xc7)]);}['popFront'](){const _0x47da55=a0_0x2de122;this['head']&&(this[_0x47da55(0xc7)]=this['head']['next']);}['pushBack'](_0x41bc80){const _0x468b8f=a0_0x2de122,_0x11b66f=this['tail'](),_0x10184b=new ListNode(_0x41bc80);_0x11b66f?_0x11b66f[_0x468b8f(0x92)]=_0x10184b:this[_0x468b8f(0xc7)]=_0x10184b;}[a0_0x2de122(0xb5)](){const _0x2f0f72=a0_0x2de122,_0x42a9df=this[_0x2f0f72(0xc9)]();if(_0x42a9df){if(this[_0x2f0f72(0xc7)]==_0x42a9df)this['head']=null;else{let _0x5983c8=this['head'];while(_0x5983c8['next']!=_0x42a9df)_0x5983c8=_0x5983c8[_0x2f0f72(0x92)];_0x5983c8[_0x2f0f72(0x92)]=null;}}}[a0_0x2de122(0xc9)](){const _0x542b2b=a0_0x2de122;let _0x413b58=null;for(let _0x529cdc=this[_0x542b2b(0xc7)];_0x529cdc;_0x529cdc=_0x529cdc[_0x542b2b(0x92)]){_0x413b58=_0x529cdc;}return _0x413b58;}[a0_0x2de122(0x8a)](){const _0x414bfd=a0_0x2de122;let _0x44e36a=0x0;for(let _0x1bef79=this['head'];_0x1bef79;_0x1bef79=_0x1bef79[_0x414bfd(0x92)]){_0x44e36a++;}return _0x44e36a;}}function a0_0x4630(){const _0x52c5c5=['value','ArrowLeft','next','assign','randomColor','10734LjXFeV','color','contestStatus','keydown','col','randomCandy','680RDMPcf','steer','lime','pink','draw','\x20Turns:\x20','dRow','3KuTsdF','rowCount','headGlyph','setStatusLine','candy','dCol','calories','intersects','turnCount','gameOver','eat','499163NWketD','cyan','drawChars','statusString','276015UpAldS','metric','drawCharAt','ArrowDown','popBack','Random','snake','pushFront','getElementById','sleepTimeout','grid','pushBack','820748NIbdGd','ArrowRight','row','red','394047fjIMAt','colCount','setSeed','Length:\x20','.\x20Metric:\x20','10QpfsOK','head','ArrowUp','tail','seedRandom','headIntersects','3196440EPbCOK','randomPosition','randBetween','length','step','rand','317176aopvyh','glyph','seed'];a0_0x4630=function(){return _0x52c5c5;};return a0_0x4630();}class Snake extends LinkedList{constructor(){const _0x32783c=a0_0x2de122;super(),this['calories']=0x0,this[_0x32783c(0x96)]='white',this['glyph']='o',this['headGlyph']='@',this[_0x32783c(0xa1)]=0x0,this[_0x32783c(0xa7)]=0x1,this[_0x32783c(0xbc)]({'row':0x5,'col':0x5}),this[_0x32783c(0xbc)]({'row':0x5,'col':0x4}),this[_0x32783c(0xbc)]({'row':0x5,'col':0x3});}['willCrash'](_0x3da1fb){const _0x197d79=a0_0x2de122,_0x2f5b1f=this[_0x197d79(0xc7)][_0x197d79(0x90)][_0x197d79(0xbf)]+this['dRow'],_0x2fc77b=this[_0x197d79(0xc7)]['value'][_0x197d79(0x99)]+this['dCol'],_0x587a2c=_0x2f5b1f>=0x0&&_0x2f5b1f<_0x3da1fb[_0x197d79(0xa3)]&&_0x2fc77b>=0x0&&_0x2fc77b<_0x3da1fb['colCount'];return!_0x587a2c||this[_0x197d79(0xa9)](_0x2f5b1f,_0x2fc77b);}['headIntersects'](_0x123597,_0x40eb84){const _0x2a8a02=a0_0x2de122;return this['head']['value'][_0x2a8a02(0xbf)]==_0x123597&&this[_0x2a8a02(0xc7)][_0x2a8a02(0x90)][_0x2a8a02(0x99)]==_0x40eb84;}[a0_0x2de122(0xa9)](_0x5850dc,_0x142639){const _0x3892d3=a0_0x2de122;let _0x2da70f=![],_0x4d1427=this['head'];while(_0x4d1427){if(_0x4d1427[_0x3892d3(0x90)][_0x3892d3(0xbf)]==_0x5850dc&&_0x4d1427[_0x3892d3(0x90)][_0x3892d3(0x99)]==_0x142639){_0x2da70f=!![];break;}_0x4d1427=_0x4d1427['next'];}return _0x2da70f;}[a0_0x2de122(0xaf)](_0x528ead){const _0x4f92e1=a0_0x2de122;let _0x9d7d0c=this['headGlyph'];for(let _0x1313a6=this['head'];_0x1313a6;_0x1313a6=_0x1313a6[_0x4f92e1(0x92)]){_0x528ead[_0x4f92e1(0xb3)](_0x1313a6[_0x4f92e1(0x90)][_0x4f92e1(0xbf)],_0x1313a6['value']['col'],_0x9d7d0c,this[_0x4f92e1(0x96)]),_0x9d7d0c=this[_0x4f92e1(0x8e)];}}[a0_0x2de122(0x9c)](_0x4e9806,_0x16328d,_0x2c23a1,_0x4b91e1){const _0x3c6e9d=a0_0x2de122;this[_0x3c6e9d(0xa1)]=0x0,this['dCol']=0x0;switch(_0x4e9806){case _0x3c6e9d(0x91):this[_0x3c6e9d(0xa7)]=-0x1;break;case _0x3c6e9d(0xbe):this['dCol']=0x1;break;case _0x3c6e9d(0xc8):this[_0x3c6e9d(0xa1)]=-0x1;break;case _0x3c6e9d(0xb4):this[_0x3c6e9d(0xa1)]=0x1;break;default:break;}}['step'](_0x5eeb70){const _0x45c5e3=a0_0x2de122;let _0x2cebcc=this['head']['value'][_0x45c5e3(0xbf)]+this['dRow'],_0x3ae0f9=this[_0x45c5e3(0xc7)][_0x45c5e3(0x90)][_0x45c5e3(0x99)]+this[_0x45c5e3(0xa7)];_0x5eeb70[_0x45c5e3(0xb3)](this['head']['value'][_0x45c5e3(0xbf)],this[_0x45c5e3(0xc7)][_0x45c5e3(0x90)]['col'],this[_0x45c5e3(0x8e)],this[_0x45c5e3(0x96)]),this[_0x45c5e3(0xb8)]({'row':_0x2cebcc,'col':_0x3ae0f9}),_0x5eeb70[_0x45c5e3(0xb3)](_0x2cebcc,_0x3ae0f9,this[_0x45c5e3(0xa4)],this[_0x45c5e3(0x96)]);if(this['calories']>0x0)this[_0x45c5e3(0xa8)]--;else{const _0x386242=this[_0x45c5e3(0xc9)]();_0x5eeb70['eraseCharAt'](_0x386242['value']['row'],_0x386242[_0x45c5e3(0x90)][_0x45c5e3(0x99)]),this[_0x45c5e3(0xb5)]();}}[a0_0x2de122(0xac)](_0x17abf1){const _0xb03a98=a0_0x2de122;this[_0xb03a98(0xa8)]+=_0x17abf1;}}function a0_0x13ee(_0xf9f734,_0x3b3ae1){const _0x463020=a0_0x4630();return a0_0x13ee=function(_0x13ee61,_0x34a43a){_0x13ee61=_0x13ee61-0x88;let _0x2897d4=_0x463020[_0x13ee61];return _0x2897d4;},a0_0x13ee(_0xf9f734,_0x3b3ae1);}class Candy{static[a0_0x2de122(0xca)](){this['Random']=new RandANSI();}constructor(_0x54f176){const _0x207c67=a0_0x2de122;Object[_0x207c67(0x93)](this,_0x54f176);}static['randomCandy'](_0x53235b,_0x4b8048,_0x3672c4){const _0x380be2=a0_0x2de122,{row:_0x58fc85,col:_0xb2f542}=this['randomPosition'](_0x53235b,_0x4b8048,_0x3672c4),_0x19adf3=this[_0x380be2(0x94)](),_0x3e734c=Candy[_0x380be2(0xb6)][_0x380be2(0x89)](0x1,0xa),_0x30433f=''+_0x3e734c;return new Candy({'row':_0x58fc85,'col':_0xb2f542,'calories':_0x3e734c,'glyph':_0x30433f,'color':_0x19adf3});}static[a0_0x2de122(0x88)](_0xc45bf1,_0x46db8a,_0x303f61){const _0x33f463=a0_0x2de122;let _0xbce709,_0x316347;do{_0xbce709=Candy[_0x33f463(0xb6)]['randBetween'](0x0,_0x46db8a),_0x316347=Candy[_0x33f463(0xb6)][_0x33f463(0x89)](0x0,_0x303f61);}while(_0xc45bf1[_0x33f463(0xa9)](_0xbce709,_0x316347));return{'row':_0xbce709,'col':_0x316347};}static[a0_0x2de122(0x94)](){const _0x182992=a0_0x2de122,_0x4f2c03=[_0x182992(0xc0),_0x182992(0x9d),'yellow',_0x182992(0xae),'magenta','orange',_0x182992(0x9e)];return _0x4f2c03[Candy[_0x182992(0xb6)][_0x182992(0x89)](0x0,_0x4f2c03[_0x182992(0x8a)])];}[a0_0x2de122(0x9f)](_0x51a69b){const _0xfa19bf=a0_0x2de122;_0x51a69b[_0xfa19bf(0xb3)](this['row'],this[_0xfa19bf(0x99)],this[_0xfa19bf(0x8e)],this[_0xfa19bf(0x96)]);}}class RandANSI{constructor(_0xfb702e=0x1){const _0x4f0da2=a0_0x2de122;this[_0x4f0da2(0x8f)]=_0xfb702e;}[a0_0x2de122(0xc3)](_0xc530d6){const _0x5bfa30=a0_0x2de122;this[_0x5bfa30(0x8f)]=_0xc530d6;}[a0_0x2de122(0x8c)](){const _0x42a5c0=a0_0x2de122;return(this[_0x42a5c0(0x8f)]=Number((BigInt(this[_0x42a5c0(0x8f)])*0x41c64e6dn+0x3039n)%0x80000000n))>>0x10&0x7fff;}['randBetween'](_0x2dcbb5,_0x4235b8){return _0x2dcbb5+this['rand']()%(_0x4235b8-_0x2dcbb5);}}