function a0_0x137c(){const _0x10200b=['orange','.\x20Metric:\x20','row','popBack','calories','15899940SAfnCR','red','candy','9209thlVox','dRow','glyph','metric','eraseCharAt','randomPosition','steer','cout','step','length','1382634GtksDf','magenta','126XdrulI','eat','cyan','Length:\x20','587848CuVVoh','60616sOddjP','grid','value','colCount','rand','randomCandy','next','white','headIntersects','yellow','setStatusLine','Ouch,\x20my\x20nose!','drawCharAt','ArrowDown','draw','getElementById','drawChars','main-canvas','ArrowRight','lime','gameOver','36tXJzxN','col','pink','headGlyph','statusString','snake','keydown','randBetween','seedRandom','198dViHGP','turnCount','tail','ArrowLeft','color','680435iqpqwR','pushFront','dCol','Random','head','2058112mlchCD','intersects','ArrowUp','sleepTimeout','willCrash','seed','rowCount','pushBack'];a0_0x137c=function(){return _0x10200b;};return a0_0x137c();}const a0_0x28c2cb=a0_0x253b;(function(_0x31e2c3,_0x393e1a){const _0x365d8f=a0_0x253b,_0x1e77e0=_0x31e2c3();while(!![]){try{const _0x286196=-parseInt(_0x365d8f(0x1d9))/0x1*(-parseInt(_0x365d8f(0x208))/0x2)+parseInt(_0x365d8f(0x1e3))/0x3+-parseInt(_0x365d8f(0x1e9))/0x4+-parseInt(_0x365d8f(0x20d))/0x5*(-parseInt(_0x365d8f(0x1ff))/0x6)+parseInt(_0x365d8f(0x212))/0x7+-parseInt(_0x365d8f(0x1ea))/0x8*(parseInt(_0x365d8f(0x1e5))/0x9)+-parseInt(_0x365d8f(0x1d6))/0xa;if(_0x286196===_0x393e1a)break;else _0x1e77e0['push'](_0x1e77e0['shift']());}catch(_0x1ecd4b){_0x1e77e0['push'](_0x1e77e0['shift']());}}}(a0_0x137c,0x9c449));import{ConsoleGrid,Cout}from'./console-grid.js';export class SnakeApp{constructor(){const _0x3eea76=a0_0x253b,_0x21d347={'canvas':document['getElementById'](_0x3eea76(0x1fb)),'rowCount':0x14,'colCount':0x1e,'backgroundDots':!![]};this[_0x3eea76(0x215)]=0x64,this['grid']=new ConsoleGrid(_0x21d347);const _0xd8780d=document[_0x3eea76(0x1f9)]('cout-lines');this[_0x3eea76(0x1e0)]=new Cout(_0xd8780d),this[_0x3eea76(0x209)]=0x0,this[_0x3eea76(0x1fe)]=![],this[_0x3eea76(0x204)]=new Snake(),this[_0x3eea76(0x204)][_0x3eea76(0x1fa)](this[_0x3eea76(0x1eb)]),Candy[_0x3eea76(0x207)](),this['candy']=Candy[_0x3eea76(0x1ef)](this[_0x3eea76(0x204)],this['grid']['rowCount'],this[_0x3eea76(0x1eb)][_0x3eea76(0x1ed)]),this[_0x3eea76(0x1d8)][_0x3eea76(0x1f8)](this[_0x3eea76(0x1eb)]),this[_0x3eea76(0x1eb)][_0x3eea76(0x1f4)](this['statusString']());}['metric'](){const _0x3bf268=a0_0x253b,_0x261029=this[_0x3bf268(0x209)],_0x10f327=this[_0x3bf268(0x204)]['length']();return _0x261029==0x0?0x0:0x1*_0x10f327*_0x10f327/_0x261029;}[a0_0x28c2cb(0x203)](_0x51b5cb){const _0x37c9b7=a0_0x28c2cb;let _0x6e349f=_0x37c9b7(0x1e8)+this[_0x37c9b7(0x204)][_0x37c9b7(0x1e2)]()+'\x20Turns:\x20'+this['turnCount']+_0x37c9b7(0x1d2)+this[_0x37c9b7(0x1dc)]()['toFixed'](0x3);if(_0x51b5cb)_0x6e349f+='.\x20'+_0x51b5cb;return _0x6e349f;}[a0_0x28c2cb(0x205)](_0x1a8eec){const _0x5bbad0=a0_0x28c2cb;let _0x2e7aa0='';switch(_0x1a8eec){case _0x5bbad0(0x20b):case _0x5bbad0(0x1fc):case _0x5bbad0(0x214):case _0x5bbad0(0x1f7):this['snake'][_0x5bbad0(0x1df)](_0x1a8eec,this['grid'],this[_0x5bbad0(0x1d8)][_0x5bbad0(0x1d3)],this[_0x5bbad0(0x1d8)][_0x5bbad0(0x200)]);break;case'Q':case'q':this[_0x5bbad0(0x1fe)]=!![];default:break;}!this[_0x5bbad0(0x1fe)]&&(this[_0x5bbad0(0x204)][_0x5bbad0(0x216)](this['grid'])?(this['gameOver']=!![],_0x2e7aa0=_0x5bbad0(0x1f5)):(this[_0x5bbad0(0x204)]['step'](this[_0x5bbad0(0x1eb)]),this[_0x5bbad0(0x204)][_0x5bbad0(0x1f2)](this[_0x5bbad0(0x1d8)][_0x5bbad0(0x1d3)],this[_0x5bbad0(0x1d8)][_0x5bbad0(0x200)])&&(this['snake'][_0x5bbad0(0x1e6)](this[_0x5bbad0(0x1d8)][_0x5bbad0(0x1d5)]),this[_0x5bbad0(0x204)][_0x5bbad0(0x20c)]=this[_0x5bbad0(0x1d8)][_0x5bbad0(0x20c)],this[_0x5bbad0(0x204)][_0x5bbad0(0x1fa)](this['grid']),this['candy']=Candy['randomCandy'](this[_0x5bbad0(0x204)],this[_0x5bbad0(0x1eb)][_0x5bbad0(0x218)],this['grid'][_0x5bbad0(0x1ed)]),this[_0x5bbad0(0x1d8)][_0x5bbad0(0x1f8)](this[_0x5bbad0(0x1eb)]))),this['turnCount']++,this['grid'][_0x5bbad0(0x1f4)](this['statusString'](_0x2e7aa0))),this[_0x5bbad0(0x1eb)][_0x5bbad0(0x1f4)](this[_0x5bbad0(0x203)](_0x2e7aa0));}}class ListNode{constructor(_0x59f1a6,_0x24d572=null){const _0xc03a95=a0_0x28c2cb;this[_0xc03a95(0x1ec)]=_0x59f1a6,this[_0xc03a95(0x1f0)]=_0x24d572;}}class LinkedList{constructor(){const _0x4b2b00=a0_0x28c2cb;this[_0x4b2b00(0x211)]=null;}[a0_0x28c2cb(0x20e)](_0x1f2fe1){const _0x4a9b07=a0_0x28c2cb;this['head']=new ListNode(_0x1f2fe1,this[_0x4a9b07(0x211)]);}['popFront'](){const _0x479960=a0_0x28c2cb;this[_0x479960(0x211)]&&(this['head']=this['head'][_0x479960(0x1f0)]);}['pushBack'](_0xc2a1cc){const _0x5de0b5=a0_0x28c2cb,_0x387839=this[_0x5de0b5(0x20a)](),_0x18a6c1=new ListNode(_0xc2a1cc);_0x387839?_0x387839[_0x5de0b5(0x1f0)]=_0x18a6c1:this[_0x5de0b5(0x211)]=_0x18a6c1;}['popBack'](){const _0x32d0eb=a0_0x28c2cb,_0x237fe3=this[_0x32d0eb(0x20a)]();if(_0x237fe3){if(this[_0x32d0eb(0x211)]==_0x237fe3)this[_0x32d0eb(0x211)]=null;else{let _0x13212a=this[_0x32d0eb(0x211)];while(_0x13212a[_0x32d0eb(0x1f0)]!=_0x237fe3)_0x13212a=_0x13212a[_0x32d0eb(0x1f0)];_0x13212a[_0x32d0eb(0x1f0)]=null;}}}['tail'](){const _0x2fed8a=a0_0x28c2cb;let _0x5ae3c2=null;for(let _0x5d66dc=this[_0x2fed8a(0x211)];_0x5d66dc;_0x5d66dc=_0x5d66dc[_0x2fed8a(0x1f0)]){_0x5ae3c2=_0x5d66dc;}return _0x5ae3c2;}['length'](){const _0x1fe88a=a0_0x28c2cb;let _0x5e2ddd=0x0;for(let _0x4df58e=this[_0x1fe88a(0x211)];_0x4df58e;_0x4df58e=_0x4df58e[_0x1fe88a(0x1f0)]){_0x5e2ddd++;}return _0x5e2ddd;}}class Snake extends LinkedList{constructor(){const _0x423e4b=a0_0x28c2cb;super(),this[_0x423e4b(0x1d5)]=0x0,this[_0x423e4b(0x20c)]=_0x423e4b(0x1f1),this[_0x423e4b(0x1db)]='o',this[_0x423e4b(0x202)]='@',this[_0x423e4b(0x1da)]=0x0,this[_0x423e4b(0x20f)]=0x1,this[_0x423e4b(0x1d0)]({'row':0x5,'col':0x5}),this[_0x423e4b(0x1d0)]({'row':0x5,'col':0x4}),this[_0x423e4b(0x1d0)]({'row':0x5,'col':0x3});}[a0_0x28c2cb(0x216)](_0xb8fa0){const _0x50014a=a0_0x28c2cb,_0x27e5e8=this[_0x50014a(0x211)][_0x50014a(0x1ec)][_0x50014a(0x1d3)]+this[_0x50014a(0x1da)],_0x4b837c=this[_0x50014a(0x211)][_0x50014a(0x1ec)]['col']+this[_0x50014a(0x20f)],_0x273a8f=_0x27e5e8>=0x0&&_0x27e5e8<_0xb8fa0[_0x50014a(0x218)]&&_0x4b837c>=0x0&&_0x4b837c<_0xb8fa0[_0x50014a(0x1ed)];return!_0x273a8f||this[_0x50014a(0x213)](_0x27e5e8,_0x4b837c);}['headIntersects'](_0x20eb45,_0x4c807f){const _0x47ff29=a0_0x28c2cb;return this[_0x47ff29(0x211)]['value'][_0x47ff29(0x1d3)]==_0x20eb45&&this['head'][_0x47ff29(0x1ec)][_0x47ff29(0x200)]==_0x4c807f;}[a0_0x28c2cb(0x213)](_0xa70256,_0x51f583){const _0x3bb00c=a0_0x28c2cb;let _0x3d3fb4=![],_0x1f2fb8=this[_0x3bb00c(0x211)];while(_0x1f2fb8){if(_0x1f2fb8[_0x3bb00c(0x1ec)][_0x3bb00c(0x1d3)]==_0xa70256&&_0x1f2fb8[_0x3bb00c(0x1ec)][_0x3bb00c(0x200)]==_0x51f583){_0x3d3fb4=!![];break;}_0x1f2fb8=_0x1f2fb8['next'];}return _0x3d3fb4;}[a0_0x28c2cb(0x1fa)](_0x5c2dfd){const _0x55f221=a0_0x28c2cb;let _0xe1a4b0=this[_0x55f221(0x202)];for(let _0x3bbfcd=this[_0x55f221(0x211)];_0x3bbfcd;_0x3bbfcd=_0x3bbfcd[_0x55f221(0x1f0)]){_0x5c2dfd[_0x55f221(0x1f6)](_0x3bbfcd[_0x55f221(0x1ec)][_0x55f221(0x1d3)],_0x3bbfcd[_0x55f221(0x1ec)][_0x55f221(0x200)],_0xe1a4b0,this[_0x55f221(0x20c)]),_0xe1a4b0=this['glyph'];}}[a0_0x28c2cb(0x1df)](_0xb87b9c,_0x2d8ae8,_0xbf9015,_0x4711b0){const _0xb52bc5=a0_0x28c2cb;this[_0xb52bc5(0x1da)]=0x0,this[_0xb52bc5(0x20f)]=0x0;switch(_0xb87b9c){case'ArrowLeft':this[_0xb52bc5(0x20f)]=-0x1;break;case _0xb52bc5(0x1fc):this[_0xb52bc5(0x20f)]=0x1;break;case _0xb52bc5(0x214):this['dRow']=-0x1;break;case _0xb52bc5(0x1f7):this['dRow']=0x1;break;default:break;}}[a0_0x28c2cb(0x1e1)](_0x39c26b){const _0x1b935=a0_0x28c2cb;let _0x5eb058=this['head'][_0x1b935(0x1ec)][_0x1b935(0x1d3)]+this[_0x1b935(0x1da)],_0x37d310=this['head'][_0x1b935(0x1ec)][_0x1b935(0x200)]+this[_0x1b935(0x20f)];_0x39c26b[_0x1b935(0x1f6)](this[_0x1b935(0x211)]['value'][_0x1b935(0x1d3)],this[_0x1b935(0x211)][_0x1b935(0x1ec)][_0x1b935(0x200)],this[_0x1b935(0x1db)],this[_0x1b935(0x20c)]),this['pushFront']({'row':_0x5eb058,'col':_0x37d310}),_0x39c26b['drawCharAt'](_0x5eb058,_0x37d310,this[_0x1b935(0x202)],this[_0x1b935(0x20c)]);if(this[_0x1b935(0x1d5)]>0x0)this[_0x1b935(0x1d5)]--;else{const _0x8e71ba=this['tail']();_0x39c26b[_0x1b935(0x1dd)](_0x8e71ba[_0x1b935(0x1ec)][_0x1b935(0x1d3)],_0x8e71ba['value']['col']),this[_0x1b935(0x1d4)]();}}[a0_0x28c2cb(0x1e6)](_0x5b3173){this['calories']+=_0x5b3173;}}class Candy{static[a0_0x28c2cb(0x207)](){this['Random']=new RandANSI();}constructor(_0x15ad67){Object['assign'](this,_0x15ad67);}static[a0_0x28c2cb(0x1ef)](_0x1739f6,_0x118a9f,_0x252a7f){const _0x160725=a0_0x28c2cb,{row:_0x5004a8,col:_0x3db40e}=this['randomPosition'](_0x1739f6,_0x118a9f,_0x252a7f),_0x1ec5ba=this['randomColor'](),_0xf05bd=Candy[_0x160725(0x210)][_0x160725(0x206)](0x1,0xa),_0x401f13=''+_0xf05bd;return new Candy({'row':_0x5004a8,'col':_0x3db40e,'calories':_0xf05bd,'glyph':_0x401f13,'color':_0x1ec5ba});}static[a0_0x28c2cb(0x1de)](_0x4d9bcd,_0x45c1da,_0x28e6f7){const _0xe63e83=a0_0x28c2cb;let _0xc46d93,_0x2cb5d7;do{_0xc46d93=Candy['Random'][_0xe63e83(0x206)](0x0,_0x45c1da),_0x2cb5d7=Candy[_0xe63e83(0x210)][_0xe63e83(0x206)](0x0,_0x28e6f7);}while(_0x4d9bcd[_0xe63e83(0x213)](_0xc46d93,_0x2cb5d7));return{'row':_0xc46d93,'col':_0x2cb5d7};}static['randomColor'](){const _0x439c79=a0_0x28c2cb,_0x2eef42=[_0x439c79(0x1d7),_0x439c79(0x1fd),_0x439c79(0x1f3),_0x439c79(0x1e7),_0x439c79(0x1e4),_0x439c79(0x1d1),_0x439c79(0x201)];return _0x2eef42[Candy[_0x439c79(0x210)]['randBetween'](0x0,_0x2eef42['length'])];}['draw'](_0x22bf6c){const _0x1acae7=a0_0x28c2cb;_0x22bf6c[_0x1acae7(0x1f6)](this['row'],this[_0x1acae7(0x200)],this[_0x1acae7(0x1db)],this[_0x1acae7(0x20c)]);}}function a0_0x253b(_0x40e107,_0x5daa3d){const _0x137c94=a0_0x137c();return a0_0x253b=function(_0x253be7,_0x136a2a){_0x253be7=_0x253be7-0x1d0;let _0x57a07c=_0x137c94[_0x253be7];return _0x57a07c;},a0_0x253b(_0x40e107,_0x5daa3d);}class RandANSI{constructor(_0x1a4c72=0x1){const _0x2698a1=a0_0x28c2cb;this[_0x2698a1(0x217)]=_0x1a4c72;}['setSeed'](_0x5deabc){this['seed']=_0x5deabc;}[a0_0x28c2cb(0x1ee)](){const _0x385512=a0_0x28c2cb;return(this[_0x385512(0x217)]=Number((BigInt(this[_0x385512(0x217)])*0x41c64e6dn+0x3039n)%0x80000000n))>>0x10&0x7fff;}[a0_0x28c2cb(0x206)](_0x4d8818,_0x34da5e){const _0x263255=a0_0x28c2cb;return _0x4d8818+this[_0x263255(0x1ee)]()%(_0x34da5e-_0x4d8818);}}