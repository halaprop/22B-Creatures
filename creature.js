const a0_0xb35e32=a0_0x12b9;(function(_0x48cec9,_0x2ae898){const _0x4dc5fb=a0_0x12b9,_0xf0df2a=_0x48cec9();while(!![]){try{const _0x2c7107=parseInt(_0x4dc5fb(0x106))/0x1+-parseInt(_0x4dc5fb(0x124))/0x2*(-parseInt(_0x4dc5fb(0xde))/0x3)+parseInt(_0x4dc5fb(0x121))/0x4+-parseInt(_0x4dc5fb(0xf3))/0x5*(-parseInt(_0x4dc5fb(0xf2))/0x6)+parseInt(_0x4dc5fb(0x100))/0x7+parseInt(_0x4dc5fb(0x111))/0x8*(-parseInt(_0x4dc5fb(0x10f))/0x9)+-parseInt(_0x4dc5fb(0xfd))/0xa;if(_0x2c7107===_0x2ae898)break;else _0xf0df2a['push'](_0xf0df2a['shift']());}catch(_0x30aaa3){_0xf0df2a['push'](_0xf0df2a['shift']());}}}(a0_0x542e,0xcd86c));import{ConsoleGrid,Cout}from'./console-grid.js';function a0_0x12b9(_0x29ea91,_0x6659dc){const _0x542ecf=a0_0x542e();return a0_0x12b9=function(_0x12b9f1,_0x26c495){_0x12b9f1=_0x12b9f1-0xdc;let _0x94cfaf=_0x542ecf[_0x12b9f1];return _0x94cfaf;},a0_0x12b9(_0x29ea91,_0x6659dc);}function a0_0x542e(){const _0x4ca7d3=['colCount','violet','turnCount','grid','dCol','playerCalories','positionEquals','padEnd','main-canvas','creatureCount','6pXVrtM','5805145nWEett','cout','kCaloriesGainedPerMeal','setStatusLine','addCreaturesFromFile','filter','find','orangered','dRow','aqua','26478190irwkYX','initialCalories','Falcon','2474115IbGcCy','orange','Mouse','Raccoon','kCaloriesGainedPerRest','magenta','1525906LoVlXy','Fox','writeLine','creatures','Badger','erase','takeTurn','rowCount','creatureAtPosition','117QSJpwz','Owl','930552tQPCIf','kInitialPlayerCalories','Deer','calories','draw','\x20cals.\x20','Turn\x20','kCaloriesConsumedPerMove','cyan','Porcupine','.\x20Player\x20has\x20','Rabbit','sleepTimeout','drawCharAt','Ate\x20the\x20','move','3430936YfhcyM','tomato','length','551844CeQlSQ','keydown','rest','col','playerCol','resting','statusString','white','forEach','toString','color','green','gameOver','creatureList','removeCreature','takeTurns','dodgerblue','name','12aWiSTQ','<br>','crimson','ArrowRight','ArrowUp','glyph','yellow','row','map','playerRow'];a0_0x542e=function(){return _0x4ca7d3;};return a0_0x542e();}export class CreaturesApp{static [a0_0xb35e32(0x112)]=0x78;static [a0_0xb35e32(0x118)]=0x5;constructor(){const _0x4ff50e=a0_0xb35e32,_0x495aa6={'canvas':document['getElementById'](_0x4ff50e(0xf0)),'rowCount':0x14,'colCount':0x1e,'backgroundDots':!![]};this[_0x4ff50e(0x11d)]=0x64,this['grid']=new ConsoleGrid(_0x495aa6);const _0x23537d=document['getElementById']('cout-lines');this[_0x4ff50e(0xf4)]=new Cout(_0x23537d),this[_0x4ff50e(0xe7)]=0x5,this[_0x4ff50e(0x128)]=0x5,this[_0x4ff50e(0xed)]=CreaturesApp[_0x4ff50e(0x112)],this['turnCount']=0x0,this[_0x4ff50e(0x130)]=![],this[_0x4ff50e(0x131)]=new CreatureList(),this[_0x4ff50e(0x131)][_0x4ff50e(0xf7)](),this[_0x4ff50e(0x131)]['draw'](this[_0x4ff50e(0xeb)]),this[_0x4ff50e(0xeb)][_0x4ff50e(0x11e)](this[_0x4ff50e(0xe7)],this[_0x4ff50e(0x128)],'@',_0x4ff50e(0x12b)),this['grid'][_0x4ff50e(0xf6)](this[_0x4ff50e(0x12a)](this['playerCalories'],'')),this[_0x4ff50e(0xf4)][_0x4ff50e(0x108)](this[_0x4ff50e(0x131)][_0x4ff50e(0x12d)]());}['statusString'](_0xdffcd6,_0xaa1918){const _0x232c71=a0_0xb35e32;return _0x232c71(0x117)+this[_0x232c71(0xea)]+_0x232c71(0x11b)+_0xdffcd6+_0x232c71(0x116)+_0xaa1918;}[a0_0xb35e32(0x125)](_0x2567b0){const _0x115668=a0_0xb35e32;if(this[_0x115668(0x130)])return;let _0xde8550=![],_0x40d2b1='';this['creatureList'][_0x115668(0x10b)](this[_0x115668(0xeb)]),this[_0x115668(0xeb)]['eraseCharAt'](this[_0x115668(0xe7)],this[_0x115668(0x128)]);switch(_0x2567b0){case _0x115668(0xe2):this[_0x115668(0xe7)]>0x0&&(_0xde8550=!![],this[_0x115668(0xe7)]--);break;case'ArrowDown':this[_0x115668(0xe7)]+0x1<this[_0x115668(0xeb)][_0x115668(0x10d)]&&(_0xde8550=!![],this[_0x115668(0xe7)]++);break;case'ArrowLeft':this[_0x115668(0x128)]>0x0&&(_0xde8550=!![],this['playerCol']--);break;case _0x115668(0xe1):this['playerCol']+0x1<this[_0x115668(0xeb)][_0x115668(0xe8)]&&(_0xde8550=!![],this['playerCol']++);break;case'Q':case'q':this['gameOver']=!![];break;default:break;}if(!this['gameOver']){_0xde8550&&(this['playerCalories']-=CreaturesApp[_0x115668(0x118)]);this[_0x115668(0x131)][_0x115668(0x133)](this[_0x115668(0xeb)]['rowCount'],this[_0x115668(0xeb)][_0x115668(0xe8)]);let _0x21e382=this[_0x115668(0x131)][_0x115668(0x10e)](this[_0x115668(0xe7)],this[_0x115668(0x128)]);_0x21e382&&(_0x40d2b1=_0x115668(0x11f)+_0x21e382[_0x115668(0xdd)],this['playerCalories']+=_0x21e382['calories'],this[_0x115668(0x131)][_0x115668(0x132)](_0x21e382),this[_0x115668(0x131)][_0x115668(0xf1)]()==0x0&&(_0x40d2b1='Having\x20eaten\x20everything,\x20player\x20wins!',this[_0x115668(0x130)]=!![])),this[_0x115668(0xed)]<=0x0&&(_0x40d2b1='Having\x20starved,\x20player\x20dies.',this['gameOver']=!![]),this['turnCount']++;}this[_0x115668(0x131)][_0x115668(0x115)](this[_0x115668(0xeb)]),this[_0x115668(0xeb)]['drawCharAt'](this[_0x115668(0xe7)],this['playerCol'],'@',_0x115668(0x12b)),this[_0x115668(0xeb)]['setStatusLine'](this[_0x115668(0x12a)](this[_0x115668(0xed)],_0x40d2b1)),this[_0x115668(0xf4)][_0x115668(0x108)](this[_0x115668(0x131)]['toString']());}}class Creature{constructor(_0xc05f1a){const _0x364d18=a0_0xb35e32;Object['assign'](this,_0xc05f1a),this[_0x364d18(0xfe)]=this['calories'];}static [a0_0xb35e32(0x118)]=0x5;static [a0_0xb35e32(0xf5)]=0x3c;static ['kCaloriesGainedPerRest']=0x5;[a0_0xb35e32(0xee)](_0x350453,_0x5a504f){const _0x2d74b3=a0_0xb35e32;return this[_0x2d74b3(0xe5)]==_0x350453&&this[_0x2d74b3(0x127)]==_0x5a504f;}['takeTurn'](_0x10f9ee,_0x4534ce){const _0x5680ef=a0_0xb35e32;this[_0x5680ef(0x129)]?this[_0x5680ef(0x126)]():this[_0x5680ef(0x120)](_0x10f9ee,_0x4534ce);}['move'](_0x3b412a,_0x4ae941){const _0x2804a5=a0_0xb35e32;let _0x14d52b=this['row']+this['dRow'];(_0x14d52b<0x0||_0x14d52b>=_0x3b412a)&&(this[_0x2804a5(0xfb)]*=-0x1,_0x14d52b=this[_0x2804a5(0xe5)]+this[_0x2804a5(0xfb)]);let _0x59ce0f=this[_0x2804a5(0x127)]+this[_0x2804a5(0xec)];(_0x59ce0f<0x0||_0x59ce0f>=_0x4ae941)&&(this[_0x2804a5(0xec)]*=-0x1,_0x59ce0f=this[_0x2804a5(0x127)]+this[_0x2804a5(0xec)]),(this[_0x2804a5(0xe5)]!=_0x14d52b||this['col']!=_0x59ce0f)&&(this[_0x2804a5(0xe5)]=_0x14d52b,this[_0x2804a5(0x127)]=_0x59ce0f,this[_0x2804a5(0x114)]-=Creature[_0x2804a5(0x118)],this['calories']<=0x0&&(this['resting']=!![]));}[a0_0xb35e32(0x126)](){const _0x151fe6=a0_0xb35e32;this[_0x151fe6(0x114)]+=Creature[_0x151fe6(0x104)],this[_0x151fe6(0x114)]>0.75*this[_0x151fe6(0xfe)]&&(this[_0x151fe6(0x129)]=![]);}[a0_0xb35e32(0x115)](_0xd8138b){const _0x394af4=a0_0xb35e32;_0xd8138b[_0x394af4(0x11e)](this['row'],this['col'],this[_0x394af4(0xe3)],this[_0x394af4(0x12e)]);}[a0_0xb35e32(0x10b)](_0xd47c0d){const _0x12aab8=a0_0xb35e32;_0xd47c0d['eraseCharAt'](this[_0x12aab8(0xe5)],this['col']);}[a0_0xb35e32(0x12d)](){const _0x35573c=a0_0xb35e32;return this[_0x35573c(0xdd)][_0x35573c(0xef)](0xa)+'\x20('+this[_0x35573c(0xe3)]+')\x20'+this[_0x35573c(0x114)]['toString']()['padStart'](0x4);}}class CreatureList{constructor(){}[a0_0xb35e32(0xf7)](){const _0xa171c9=a0_0xb35e32,_0x32a593=[{'name':_0xa171c9(0x102),'glyph':'M','row':0x5,'col':0x2,'dRow':0x1,'dCol':0x1,'calories':0x5a,'color':_0xa171c9(0xfc)},{'name':_0xa171c9(0x11c),'glyph':'R','row':0x8,'col':0x1b,'dRow':0x1,'dCol':-0x1,'calories':0x6e,'color':_0xa171c9(0x12f)},{'name':'Boar','glyph':'B','row':0x12,'col':0x12,'dRow':-0x1,'dCol':0x0,'calories':0xf0,'color':_0xa171c9(0xe4)},{'name':'Squirrel','glyph':'S','row':0x9,'col':0x4,'dRow':-0x1,'dCol':-0x1,'calories':0x64,'color':_0xa171c9(0xe9)},{'name':_0xa171c9(0x113),'glyph':'D','row':0xc,'col':0xf,'dRow':0x1,'dCol':0x0,'calories':0x15e,'color':_0xa171c9(0x105)},{'name':_0xa171c9(0x107),'glyph':'F','row':0x6,'col':0x13,'dRow':-0x1,'dCol':0x1,'calories':0x96,'color':_0xa171c9(0x101)},{'name':_0xa171c9(0x103),'glyph':'C','row':0xa,'col':0x7,'dRow':0x0,'dCol':0x1,'calories':0x78,'color':_0xa171c9(0xe0)},{'name':_0xa171c9(0x110),'glyph':'O','row':0x3,'col':0x19,'dRow':0x1,'dCol':-0x1,'calories':0x8c,'color':'deepskyblue'},{'name':'Hedgehog','glyph':'H','row':0xf,'col':0xa,'dRow':-0x1,'dCol':0x1,'calories':0x46,'color':'chartreuse'},{'name':_0xa171c9(0x10a),'glyph':'A','row':0x7,'col':0xc,'dRow':0x1,'dCol':0x1,'calories':0xb4,'color':'gold'},{'name':_0xa171c9(0x11a),'glyph':'P','row':0x12,'col':0x5,'dRow':0x0,'dCol':-0x1,'calories':0x82,'color':_0xa171c9(0x122)},{'name':'Skunk','glyph':'K','row':0xe,'col':0x17,'dRow':0x1,'dCol':0x0,'calories':0x64,'color':_0xa171c9(0x119)},{'name':'Lynx','glyph':'L','row':0x4,'col':0x8,'dRow':-0x1,'dCol':0x0,'calories':0xd2,'color':_0xa171c9(0xdc)},{'name':_0xa171c9(0xff),'glyph':'N','row':0x1,'col':0x1d,'dRow':0x0,'dCol':0x1,'calories':0xa0,'color':_0xa171c9(0xfa)}];this['creatures']=_0x32a593[_0xa171c9(0xe6)](_0x2b2081=>new Creature(_0x2b2081));}['draw'](_0x482daa){const _0x107ced=a0_0xb35e32;this[_0x107ced(0x109)][_0x107ced(0x12c)](_0x57e39e=>_0x57e39e['draw'](_0x482daa));}[a0_0xb35e32(0x10b)](_0x1ee6fe){const _0x86eb3a=a0_0xb35e32;this[_0x86eb3a(0x109)][_0x86eb3a(0x12c)](_0x6bf581=>_0x6bf581['erase'](_0x1ee6fe));}[a0_0xb35e32(0x133)](_0x4a1e19,_0x5691a8){const _0x8ef029=a0_0xb35e32;this[_0x8ef029(0x109)][_0x8ef029(0x12c)](_0x3a97a2=>_0x3a97a2[_0x8ef029(0x10c)](_0x4a1e19,_0x5691a8));}[a0_0xb35e32(0x10e)](_0xde0a44,_0x442433){const _0x3d8689=a0_0xb35e32;return this[_0x3d8689(0x109)][_0x3d8689(0xf9)](_0x4b06b8=>_0x4b06b8[_0x3d8689(0xee)](_0xde0a44,_0x442433));}[a0_0xb35e32(0x132)](_0x4a358e){const _0x17b7dd=a0_0xb35e32;this[_0x17b7dd(0x109)]=this[_0x17b7dd(0x109)][_0x17b7dd(0xf8)](_0x2dce9e=>_0x2dce9e!=_0x4a358e);}['creatureCount'](){const _0x1db927=a0_0xb35e32;return this[_0x1db927(0x109)][_0x1db927(0x123)];}['toString'](){const _0x446271=a0_0xb35e32;return this[_0x446271(0x109)][_0x446271(0xe6)](_0x2c711a=>_0x2c711a[_0x446271(0x12d)]())['join'](_0x446271(0xdf));}}