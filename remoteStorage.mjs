function a0_0x4b21(_0x3a256b,_0x36a2a6){const _0x5c542b=a0_0x5c54();return a0_0x4b21=function(_0x4b2189,_0x543105){_0x4b2189=_0x4b2189-0x11f;let _0x2bf014=_0x5c542b[_0x4b2189];return _0x2bf014;},a0_0x4b21(_0x3a256b,_0x36a2a6);}const a0_0x51752=a0_0x4b21;function a0_0x5c54(){const _0x23a8c3=['2873519lhrkwh','push','7NbfKqx','code','DELETE','stringify','namespace','toString','https://remote-storage.dan-5d7.workers.dev/v1','search','list','setItem','/set','2835CCmywZ','/get','json','removeItem','body','catch','some','Unknown\x20network\x20error','getNamespace','8460dWjweb','2969360wkzxlJ','requestHeaders','2616APsTsO','status','register','entries','670GUOiNK','endpoint','522208XsJooW','clear','/getWithMetadata','name','length','application/json','492474SbEBBe','Authorization','GET','token','235705OWIOXl','keysPaged','keys','all','getItemWithMetadata','POST','getItem','/list','apiFetch','http-error','map','3PggWpW','filter','type'];a0_0x5c54=function(){return _0x23a8c3;};return a0_0x5c54();}(function(_0x428edd,_0x5f90e5){const _0x5d15eb=a0_0x4b21,_0x2bc065=_0x428edd();while(!![]){try{const _0xcaffd9=parseInt(_0x5d15eb(0x150))/0x1+-parseInt(_0x5d15eb(0x146))/0x2*(-parseInt(_0x5d15eb(0x124))/0x3)+parseInt(_0x5d15eb(0x140))/0x4*(-parseInt(_0x5d15eb(0x134))/0x5)+-parseInt(_0x5d15eb(0x14c))/0x6*(parseInt(_0x5d15eb(0x129))/0x7)+parseInt(_0x5d15eb(0x13e))/0x8+-parseInt(_0x5d15eb(0x13d))/0x9*(-parseInt(_0x5d15eb(0x144))/0xa)+-parseInt(_0x5d15eb(0x127))/0xb;if(_0xcaffd9===_0x5f90e5)break;else _0x2bc065['push'](_0x2bc065['shift']());}catch(_0x50e407){_0x2bc065['push'](_0x2bc065['shift']());}}}(a0_0x5c54,0x34f01));export class RemoteStorage{constructor(_0xf5e599,_0x19d6ce){const _0x50ea12=a0_0x4b21;this['namespace']=_0xf5e599,this['endpoint']=_0x50ea12(0x12f),this['requestHeaders']={'Content-Type':_0x50ea12(0x14b)};if(_0x19d6ce)this[_0x50ea12(0x13f)][_0x50ea12(0x14d)]=_0x19d6ce;}async[a0_0x51752(0x142)](_0x2cf7a3,_0x1f23b7){const _0x1740ae=a0_0x51752,_0x19d689=await fetch(this[_0x1740ae(0x145)]+'/register',{'method':_0x1740ae(0x155),'headers':{'Content-Type':_0x1740ae(0x14b)},'body':JSON[_0x1740ae(0x12c)]({'userID':_0x2cf7a3,'password':_0x1f23b7})}),_0x3febb0=await _0x19d689['json']()[_0x1740ae(0x139)](()=>({}));if(!_0x19d689['ok'])throw{'status':_0x19d689[_0x1740ae(0x141)],'body':_0x3febb0};return{'status':_0x19d689['status'],'json':_0x3febb0};}async['login'](_0x5ba6fb,_0x715f5b){const _0x235f4f=a0_0x51752,_0x287108=await fetch(this['endpoint']+'/login',{'method':_0x235f4f(0x155),'headers':{'Content-Type':_0x235f4f(0x14b)},'body':JSON[_0x235f4f(0x12c)]({'namespace':this[_0x235f4f(0x12d)],'userID':_0x5ba6fb,'password':_0x715f5b})}),_0x2b3d27=await _0x287108[_0x235f4f(0x136)]()[_0x235f4f(0x139)](()=>({}));if(!_0x287108['ok'])throw{'status':_0x287108[_0x235f4f(0x141)],'body':_0x2b3d27};const _0xff12e4=_0x2b3d27[_0x235f4f(0x14f)];return this[_0x235f4f(0x13f)][_0x235f4f(0x14d)]=_0xff12e4,_0xff12e4;}async[a0_0x51752(0x152)](){const _0x2cb3a1=a0_0x51752;let _0x33b177=[],_0x45635d=null;while(!![]){const {keys:_0x400e6c,cursor:_0x3a6d7a,list_complete:_0x298c74}=await this[_0x2cb3a1(0x151)]({'cursor':_0x45635d});_0x33b177[_0x2cb3a1(0x128)](..._0x400e6c);if(_0x298c74)break;_0x45635d=_0x3a6d7a;}return _0x33b177;}async[a0_0x51752(0x151)]({limit:limit=0x3e8,cursor:_0x3f8541=null}={}){const _0x51572e=a0_0x51752,{items:_0x58306a,cursor:_0x5c28b6,list_complete:_0x2ccced}=await this[_0x51572e(0x131)]({'limit':limit,'cursor':_0x3f8541}),_0x21d2b6=_0x58306a[_0x51572e(0x123)](_0x31228d=>_0x31228d['name']);return{'keys':_0x21d2b6,'cursor':_0x5c28b6,'list_complete':_0x2ccced};}async[a0_0x51752(0x13c)](..._0x192568){const _0x3410ad=a0_0x51752,_0x2b610d={};let _0x10c755=null;while(!![]){const {items:_0x27b8b1,cursor:_0x48ac75,list_complete:_0x2ca875}=await this['list']({'cursor':_0x10c755}),_0x285df1=_0x192568[_0x3410ad(0x14a)]?_0x27b8b1[_0x3410ad(0x125)](_0xf74786=>_0x192568[_0x3410ad(0x13a)](_0x5ee863=>_0xf74786[_0x3410ad(0x149)]['startsWith'](_0x5ee863))):_0x27b8b1;await Promise['all'](_0x285df1[_0x3410ad(0x123)](async({name:_0x3a69ca,metadata:_0x4ed5f1})=>{const _0x59349d=_0x3410ad,_0x3a748f=await this[_0x59349d(0x11f)](_0x3a69ca);_0x2b610d[_0x3a69ca]={'value':_0x3a748f,'metadata':_0x4ed5f1};}));if(_0x2ca875)break;_0x10c755=_0x48ac75;}return _0x2b610d;}async[a0_0x51752(0x131)]({limit:limit=0x3e8,cursor:cursor=null}={}){const _0x3cddc0=a0_0x51752;return this[_0x3cddc0(0x121)](_0x3cddc0(0x14e),_0x3cddc0(0x120),null,{'limit':limit,'cursor':cursor});}async[a0_0x51752(0x132)](_0x255b4b,_0x43c475){const _0x4b6851=a0_0x51752;return this[_0x4b6851(0x121)]('POST',_0x4b6851(0x133),{'key':_0x255b4b,'value':_0x43c475});}async[a0_0x51752(0x11f)](_0x1e0d7e){const _0x40aefc=a0_0x51752;return this['apiFetch'](_0x40aefc(0x14e),_0x40aefc(0x135),null,{'key':_0x1e0d7e});}async[a0_0x51752(0x154)](_0x45172c){const _0xd20ef=a0_0x51752;return this[_0xd20ef(0x121)](_0xd20ef(0x14e),_0xd20ef(0x148),null,{'key':_0x45172c});}async[a0_0x51752(0x137)](_0x55927a){const _0x2a9b58=a0_0x51752;return this[_0x2a9b58(0x121)](_0x2a9b58(0x12b),'/delete',null,{'key':_0x55927a});}async[a0_0x51752(0x147)](){const _0x47f09e=a0_0x51752,_0x1c8e56=await this[_0x47f09e(0x152)]();return await Promise[_0x47f09e(0x153)](_0x1c8e56[_0x47f09e(0x123)](_0x8a3107=>this['removeItem'](_0x8a3107))),null;}async[a0_0x51752(0x121)](_0x36fbf1,_0x35ca0a,_0x3db2cc=null,_0x132184={}){const _0x572bf6=a0_0x51752;_0x132184={..._0x132184,'namespace':this[_0x572bf6(0x12d)]};const _0x13cbd6=new URL(''+this[_0x572bf6(0x145)]+_0x35ca0a);_0x13cbd6[_0x572bf6(0x130)]=new URLSearchParams(Object[_0x572bf6(0x143)](_0x132184)[_0x572bf6(0x125)](([_0x194df2,_0x5994ee])=>_0x5994ee!==undefined&&_0x5994ee!==null))[_0x572bf6(0x12e)]();const _0x36836c={'method':_0x36fbf1,'headers':this[_0x572bf6(0x13f)]};if(_0x3db2cc)_0x36836c[_0x572bf6(0x138)]=JSON[_0x572bf6(0x12c)](_0x3db2cc);try{const _0xda8c5f=await fetch(_0x13cbd6,_0x36836c),_0x79ab29=await _0xda8c5f['json']()[_0x572bf6(0x139)](()=>({}));if(!_0xda8c5f['ok'])throw{'type':_0x572bf6(0x122),'status':_0xda8c5f[_0x572bf6(0x141)],'body':_0x79ab29};return _0x79ab29;}catch(_0x3c942b){if(_0x3c942b?.[_0x572bf6(0x126)]==='http-error')throw _0x3c942b;const _0x1aa2b1=_0x3c942b?.['message']||_0x3c942b?.['name']||_0x3c942b?.[_0x572bf6(0x12a)]||_0x572bf6(0x13b);throw{'type':'network-error','detail':_0x1aa2b1};}}}