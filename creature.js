const a0_0x1620bc=a0_0x2fb9;(function(_0x4aedf4,_0x1153a2){const _0x4178d1=a0_0x2fb9,_0x4c5052=_0x4aedf4();while(!![]){try{const _0x3ca18b=parseInt(_0x4178d1(0x1a3))/0x1*(-parseInt(_0x4178d1(0x1b2))/0x2)+-parseInt(_0x4178d1(0x173))/0x3+-parseInt(_0x4178d1(0x19d))/0x4+-parseInt(_0x4178d1(0x19a))/0x5+-parseInt(_0x4178d1(0x174))/0x6*(-parseInt(_0x4178d1(0x18d))/0x7)+-parseInt(_0x4178d1(0x1bd))/0x8+parseInt(_0x4178d1(0x17f))/0x9*(parseInt(_0x4178d1(0x1a2))/0xa);if(_0x3ca18b===_0x1153a2)break;else _0x4c5052['push'](_0x4c5052['shift']());}catch(_0x1da011){_0x4c5052['push'](_0x4c5052['shift']());}}}(a0_0x48ef,0xa81dd));import{ConsoleGrid,Cout}from'./console-grid.js';export class CreaturesApp{static [a0_0x1620bc(0x199)]=0x78;static [a0_0x1620bc(0x19b)]=0x5;constructor(){const _0x31446a=a0_0x1620bc,_0x2bc252={'canvas':document[_0x31446a(0x17e)]('main-canvas'),'rowCount':0x14,'colCount':0x1e,'backgroundDots':!![]};this['sleepTimeout']=0x64,this[_0x31446a(0x186)]=new ConsoleGrid(_0x2bc252);const _0x464fdc=document[_0x31446a(0x17e)](_0x31446a(0x188));this[_0x31446a(0x196)]=new Cout(_0x464fdc),this[_0x31446a(0x192)]=0x5,this['playerCol']=0x5,this['playerCalories']=CreaturesApp[_0x31446a(0x199)],this[_0x31446a(0x189)]=0x0,this['gameOver']=![],this[_0x31446a(0x1b9)]=new CreatureList(),this['creatureList'][_0x31446a(0x18f)](),this[_0x31446a(0x1b9)][_0x31446a(0x1ab)](this['grid']),this[_0x31446a(0x186)][_0x31446a(0x178)](this[_0x31446a(0x192)],this[_0x31446a(0x195)],'@',_0x31446a(0x193)),this[_0x31446a(0x186)][_0x31446a(0x19c)](this[_0x31446a(0x198)](this[_0x31446a(0x180)],'')),this[_0x31446a(0x196)][_0x31446a(0x197)](this['creatureList'][_0x31446a(0x17d)]());}[a0_0x1620bc(0x198)](_0x4a4cf0,_0x1ea8f7){const _0x37b72a=a0_0x1620bc;return _0x37b72a(0x1a7)+this[_0x37b72a(0x189)]+_0x37b72a(0x1b4)+_0x4a4cf0+_0x37b72a(0x1b8)+_0x1ea8f7;}[a0_0x1620bc(0x1b7)](_0x288947){const _0xaad9e9=a0_0x1620bc;let _0xff2f2b=![],_0x1af662='';this[_0xaad9e9(0x1b9)]['erase'](this[_0xaad9e9(0x186)]),this[_0xaad9e9(0x186)]['eraseCharAt'](this[_0xaad9e9(0x192)],this['playerCol']);switch(_0x288947){case _0xaad9e9(0x1bb):this['playerRow']>0x0&&(_0xff2f2b=!![],this[_0xaad9e9(0x192)]--);break;case'ArrowDown':this[_0xaad9e9(0x192)]+0x1<this[_0xaad9e9(0x186)][_0xaad9e9(0x19f)]&&(_0xff2f2b=!![],this[_0xaad9e9(0x192)]++);break;case'ArrowLeft':this[_0xaad9e9(0x195)]>0x0&&(_0xff2f2b=!![],this[_0xaad9e9(0x195)]--);break;case'ArrowRight':this[_0xaad9e9(0x195)]+0x1<this[_0xaad9e9(0x186)][_0xaad9e9(0x17c)]&&(_0xff2f2b=!![],this[_0xaad9e9(0x195)]++);break;case'Q':case'q':this['gameOver']=!![];break;default:break;}if(!this['gameOver']){_0xff2f2b&&(this[_0xaad9e9(0x180)]-=CreaturesApp[_0xaad9e9(0x19b)]);this['creatureList'][_0xaad9e9(0x1a6)](this[_0xaad9e9(0x186)][_0xaad9e9(0x19f)],this['grid'][_0xaad9e9(0x17c)]);let _0x2380ed=this[_0xaad9e9(0x1b9)]['creatureAtPosition'](this['playerRow'],this['playerCol']);_0x2380ed&&(_0x1af662=_0xaad9e9(0x1ad)+_0x2380ed[_0xaad9e9(0x184)],this[_0xaad9e9(0x180)]+=_0x2380ed[_0xaad9e9(0x190)],this[_0xaad9e9(0x1b9)][_0xaad9e9(0x172)](_0x2380ed),this[_0xaad9e9(0x1b9)][_0xaad9e9(0x1ba)]()==0x0&&(_0x1af662=_0xaad9e9(0x1b0),this[_0xaad9e9(0x1a9)]=!![])),this[_0xaad9e9(0x180)]<=0x0&&(_0x1af662='Having\x20starved,\x20player\x20dies.',this[_0xaad9e9(0x1a9)]=!![]),this['turnCount']++;}this[_0xaad9e9(0x1b9)]['draw'](this[_0xaad9e9(0x186)]),this[_0xaad9e9(0x186)][_0xaad9e9(0x178)](this[_0xaad9e9(0x192)],this[_0xaad9e9(0x195)],'@','white'),this[_0xaad9e9(0x186)][_0xaad9e9(0x19c)](this[_0xaad9e9(0x198)](this['playerCalories'],_0x1af662)),this[_0xaad9e9(0x196)][_0xaad9e9(0x197)](this[_0xaad9e9(0x1b9)][_0xaad9e9(0x17d)]());}}function a0_0x48ef(){const _0x2d85ae=['initialCalories','.\x20Player\x20has\x20','creatures','rest','keydown','\x20cals.\x20','creatureList','creatureCount','ArrowUp','move','4365224IeJmzu','takeTurn','find','green','removeCreature','3056736MplaKp','2851602VCWabj','Raccoon','dRow','Deer','drawCharAt','crimson','Hedgehog','resting','colCount','toString','getElementById','36OQDEPg','playerCalories','orange','yellow','Badger','name','positionEquals','grid','dCol','cout-lines','turnCount','Porcupine','cyan','forEach','7PTQZcA','Falcon','addCreaturesFromFile','calories','Squirrel','playerRow','white','aqua','playerCol','cout','writeLine','statusString','kInitialPlayerCalories','5552015xXOgIZ','kCaloriesConsumedPerMove','setStatusLine','5249180ratBDz','erase','rowCount','Fox','padEnd','12191090iqJlUR','5nixIws','gold','map','takeTurns','Turn\x20','col','gameOver','Lynx','draw','glyph','Ate\x20the\x20','join','row','Having\x20eaten\x20everything,\x20player\x20wins!','kCaloriesGainedPerRest','270334iluiDL'];a0_0x48ef=function(){return _0x2d85ae;};return a0_0x48ef();}class Creature{constructor(_0x45f059){const _0x484897=a0_0x1620bc;Object['assign'](this,_0x45f059),this[_0x484897(0x1b3)]=this[_0x484897(0x190)];}static [a0_0x1620bc(0x19b)]=0x5;static ['kCaloriesGainedPerMeal']=0x3c;static [a0_0x1620bc(0x1b1)]=0x5;[a0_0x1620bc(0x185)](_0xd12a2c,_0x1e5b89){const _0x4e3e13=a0_0x1620bc;return this[_0x4e3e13(0x1af)]==_0xd12a2c&&this[_0x4e3e13(0x1a8)]==_0x1e5b89;}[a0_0x1620bc(0x1be)](_0x373663,_0x4fa8c5){const _0x1b5dd7=a0_0x1620bc;this['resting']?this[_0x1b5dd7(0x1b6)]():this[_0x1b5dd7(0x1bc)](_0x373663,_0x4fa8c5);}[a0_0x1620bc(0x1bc)](_0x1609de,_0x9d61ee){const _0xcd86c4=a0_0x1620bc;let _0x3deedd=this['row']+this[_0xcd86c4(0x176)];(_0x3deedd<0x0||_0x3deedd>=_0x1609de)&&(this['dRow']*=-0x1,_0x3deedd=this['row']+this['dRow']);let _0x25658d=this[_0xcd86c4(0x1a8)]+this['dCol'];(_0x25658d<0x0||_0x25658d>=_0x9d61ee)&&(this[_0xcd86c4(0x187)]*=-0x1,_0x25658d=this[_0xcd86c4(0x1a8)]+this[_0xcd86c4(0x187)]),(this[_0xcd86c4(0x1af)]!=_0x3deedd||this[_0xcd86c4(0x1a8)]!=_0x25658d)&&(this['row']=_0x3deedd,this[_0xcd86c4(0x1a8)]=_0x25658d,this[_0xcd86c4(0x190)]-=Creature[_0xcd86c4(0x19b)],this[_0xcd86c4(0x190)]<=0x0&&(this['resting']=!![]));}[a0_0x1620bc(0x1b6)](){const _0x1a96be=a0_0x1620bc;this[_0x1a96be(0x190)]+=Creature['kCaloriesGainedPerRest'],this[_0x1a96be(0x190)]>0.75*this[_0x1a96be(0x1b3)]&&(this[_0x1a96be(0x17b)]=![]);}[a0_0x1620bc(0x1ab)](_0x563828){const _0xf44451=a0_0x1620bc;_0x563828[_0xf44451(0x178)](this['row'],this[_0xf44451(0x1a8)],this[_0xf44451(0x1ac)],this['color']);}[a0_0x1620bc(0x19e)](_0x349532){const _0xacfc52=a0_0x1620bc;_0x349532['eraseCharAt'](this[_0xacfc52(0x1af)],this[_0xacfc52(0x1a8)]);}[a0_0x1620bc(0x17d)](){const _0x58e6f4=a0_0x1620bc;return this['name'][_0x58e6f4(0x1a1)](0xa)+'\x20('+this[_0x58e6f4(0x1ac)]+')\x20'+this['calories'][_0x58e6f4(0x17d)]()['padStart'](0x4);}}function a0_0x2fb9(_0x52b004,_0x126dc1){const _0x48ef2d=a0_0x48ef();return a0_0x2fb9=function(_0x2fb97c,_0x23b31b){_0x2fb97c=_0x2fb97c-0x171;let _0x55c622=_0x48ef2d[_0x2fb97c];return _0x55c622;},a0_0x2fb9(_0x52b004,_0x126dc1);}class CreatureList{constructor(){}['addCreaturesFromFile'](){const _0x4f05fa=a0_0x1620bc,_0x3addf4=[{'name':'Mouse','glyph':'M','row':0x5,'col':0x2,'dRow':0x1,'dCol':0x1,'calories':0x5a,'color':_0x4f05fa(0x194)},{'name':'Rabbit','glyph':'R','row':0x8,'col':0x1b,'dRow':0x1,'dCol':-0x1,'calories':0x6e,'color':_0x4f05fa(0x171)},{'name':'Boar','glyph':'B','row':0x12,'col':0x12,'dRow':-0x1,'dCol':0x0,'calories':0xf0,'color':_0x4f05fa(0x182)},{'name':_0x4f05fa(0x191),'glyph':'S','row':0x9,'col':0x4,'dRow':-0x1,'dCol':-0x1,'calories':0x64,'color':'violet'},{'name':_0x4f05fa(0x177),'glyph':'D','row':0xc,'col':0xf,'dRow':0x1,'dCol':0x0,'calories':0x15e,'color':'magenta'},{'name':_0x4f05fa(0x1a0),'glyph':'F','row':0x6,'col':0x13,'dRow':-0x1,'dCol':0x1,'calories':0x96,'color':_0x4f05fa(0x181)},{'name':_0x4f05fa(0x175),'glyph':'C','row':0xa,'col':0x7,'dRow':0x0,'dCol':0x1,'calories':0x78,'color':_0x4f05fa(0x179)},{'name':'Owl','glyph':'O','row':0x3,'col':0x19,'dRow':0x1,'dCol':-0x1,'calories':0x8c,'color':'deepskyblue'},{'name':_0x4f05fa(0x17a),'glyph':'H','row':0xf,'col':0xa,'dRow':-0x1,'dCol':0x1,'calories':0x46,'color':'chartreuse'},{'name':_0x4f05fa(0x183),'glyph':'A','row':0x7,'col':0xc,'dRow':0x1,'dCol':0x1,'calories':0xb4,'color':_0x4f05fa(0x1a4)},{'name':_0x4f05fa(0x18a),'glyph':'P','row':0x12,'col':0x5,'dRow':0x0,'dCol':-0x1,'calories':0x82,'color':'tomato'},{'name':'Skunk','glyph':'K','row':0xe,'col':0x17,'dRow':0x1,'dCol':0x0,'calories':0x64,'color':_0x4f05fa(0x18b)},{'name':_0x4f05fa(0x1aa),'glyph':'L','row':0x4,'col':0x8,'dRow':-0x1,'dCol':0x0,'calories':0xd2,'color':'dodgerblue'},{'name':_0x4f05fa(0x18e),'glyph':'N','row':0x1,'col':0x1d,'dRow':0x0,'dCol':0x1,'calories':0xa0,'color':'orangered'}];this[_0x4f05fa(0x1b5)]=_0x3addf4['map'](_0x84e8b8=>new Creature(_0x84e8b8));}[a0_0x1620bc(0x1ab)](_0x206bbc){const _0x1fe693=a0_0x1620bc;this[_0x1fe693(0x1b5)][_0x1fe693(0x18c)](_0x3e67c5=>_0x3e67c5['draw'](_0x206bbc));}[a0_0x1620bc(0x19e)](_0x4b68f2){const _0x382571=a0_0x1620bc;this[_0x382571(0x1b5)]['forEach'](_0x34a4dc=>_0x34a4dc[_0x382571(0x19e)](_0x4b68f2));}[a0_0x1620bc(0x1a6)](_0x5139ed,_0x2e31a2){const _0x3952d8=a0_0x1620bc;this[_0x3952d8(0x1b5)][_0x3952d8(0x18c)](_0x169449=>_0x169449[_0x3952d8(0x1be)](_0x5139ed,_0x2e31a2));}['creatureAtPosition'](_0x56acd3,_0x40e8de){const _0x3255f6=a0_0x1620bc;return this[_0x3255f6(0x1b5)][_0x3255f6(0x1bf)](_0x58d919=>_0x58d919[_0x3255f6(0x185)](_0x56acd3,_0x40e8de));}[a0_0x1620bc(0x172)](_0x3487f7){const _0xa11640=a0_0x1620bc;this[_0xa11640(0x1b5)]=this['creatures']['filter'](_0x259e5a=>_0x259e5a!=_0x3487f7);}['creatureCount'](){const _0xfdf475=a0_0x1620bc;return this[_0xfdf475(0x1b5)]['length'];}[a0_0x1620bc(0x17d)](){const _0x1847b3=a0_0x1620bc;return this[_0x1847b3(0x1b5)][_0x1847b3(0x1a5)](_0x23c90b=>_0x23c90b['toString']())[_0x1847b3(0x1ae)]('<br>');}}