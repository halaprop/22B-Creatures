const a0_0x1cff1f=a0_0x3355;(function(_0x46a105,_0x1bb687){const _0x2d2a65=a0_0x3355,_0x3024bc=_0x46a105();while(!![]){try{const _0x77ce98=parseInt(_0x2d2a65(0x92))/0x1+parseInt(_0x2d2a65(0xa0))/0x2*(-parseInt(_0x2d2a65(0xba))/0x3)+-parseInt(_0x2d2a65(0x85))/0x4*(-parseInt(_0x2d2a65(0x7a))/0x5)+-parseInt(_0x2d2a65(0x91))/0x6+-parseInt(_0x2d2a65(0x89))/0x7+parseInt(_0x2d2a65(0x78))/0x8+parseInt(_0x2d2a65(0x8e))/0x9*(parseInt(_0x2d2a65(0x76))/0xa);if(_0x77ce98===_0x1bb687)break;else _0x3024bc['push'](_0x3024bc['shift']());}catch(_0xc15696){_0x3024bc['push'](_0x3024bc['shift']());}}}(a0_0x4251,0x48281));import{ConsoleGrid,Cout}from'./console-grid.js';export class SnakeApp{constructor(){const _0x3d0589=a0_0x3355,_0xaffeba={'canvas':document[_0x3d0589(0xa8)](_0x3d0589(0x73)),'rowCount':0x14,'colCount':0x1e,'backgroundDots':!![]};this[_0x3d0589(0x77)]=0x64,this['grid']=new ConsoleGrid(_0xaffeba);const _0x29265c=document[_0x3d0589(0xa8)]('cout-lines');this[_0x3d0589(0xb8)]=new Cout(_0x29265c),this[_0x3d0589(0xb1)]=0x0,this[_0x3d0589(0x75)]=![],this['snake']=new Snake(),this[_0x3d0589(0x79)][_0x3d0589(0xa6)](this['grid']),Candy[_0x3d0589(0x8d)](),this[_0x3d0589(0xa5)]=Candy[_0x3d0589(0xb3)](this[_0x3d0589(0x79)],this[_0x3d0589(0xaf)]['rowCount'],this['grid'][_0x3d0589(0x7d)]),this[_0x3d0589(0xa5)][_0x3d0589(0xab)](this[_0x3d0589(0xaf)]),this[_0x3d0589(0xaf)][_0x3d0589(0xb9)](this[_0x3d0589(0x97)]());}['metric'](){const _0x3a49fb=a0_0x3355,_0x11ba68=this[_0x3a49fb(0xb1)],_0x52e054=this[_0x3a49fb(0x79)]['length']();return _0x11ba68==0x0?0x0:0x1*_0x52e054*_0x52e054/_0x11ba68;}[a0_0x1cff1f(0x97)](_0x424910){const _0x4d385a=a0_0x1cff1f;let _0x243aa9=_0x4d385a(0xa3)+this[_0x4d385a(0x79)]['length']()+'\x20Turns:\x20'+this[_0x4d385a(0xb1)]+'.\x20Metric:\x20'+this[_0x4d385a(0x93)]()[_0x4d385a(0x90)](0x3);if(_0x424910)_0x243aa9+='.\x20'+_0x424910;return _0x243aa9;}[a0_0x1cff1f(0x83)](_0x155f77){const _0x3a7706=a0_0x1cff1f;let _0xef45e3='';switch(_0x155f77){case _0x3a7706(0xb0):case _0x3a7706(0xae):case _0x3a7706(0xb6):case _0x3a7706(0xb7):this[_0x3a7706(0x79)][_0x3a7706(0x88)](_0x155f77,this[_0x3a7706(0xaf)],this['candy']['row'],this[_0x3a7706(0xa5)][_0x3a7706(0x8b)]);break;case'Q':case'q':this[_0x3a7706(0x75)]=!![],_0xef45e3='Player\x20quit';break;default:break;}!this[_0x3a7706(0x75)]&&(this['snake']['willCrash'](this['grid'])?(this['gameOver']=!![],_0xef45e3='Ouch,\x20my\x20nose!'):(this['snake'][_0x3a7706(0x9f)](this[_0x3a7706(0xaf)]),this[_0x3a7706(0xb1)]++,this['snake'][_0x3a7706(0x98)](this['candy'][_0x3a7706(0x80)],this['candy'][_0x3a7706(0x8b)])&&(this[_0x3a7706(0x79)][_0x3a7706(0xbc)](this['candy'][_0x3a7706(0x8f)]),this[_0x3a7706(0x79)][_0x3a7706(0x9a)]=this[_0x3a7706(0xa5)][_0x3a7706(0x9a)],this[_0x3a7706(0x79)][_0x3a7706(0xa6)](this['grid']),this[_0x3a7706(0x79)]['length']()<this[_0x3a7706(0xaf)][_0x3a7706(0x7e)]*this[_0x3a7706(0xaf)][_0x3a7706(0x7d)]?(this['candy']=Candy[_0x3a7706(0xb3)](this[_0x3a7706(0x79)],this[_0x3a7706(0xaf)][_0x3a7706(0x7e)],this[_0x3a7706(0xaf)][_0x3a7706(0x7d)]),this['candy'][_0x3a7706(0xab)](this[_0x3a7706(0xaf)])):(this[_0x3a7706(0x75)]=!![],_0xef45e3='Board\x20is\x20full!')))),this[_0x3a7706(0xaf)][_0x3a7706(0xb9)](this[_0x3a7706(0x97)](_0xef45e3));}[a0_0x1cff1f(0xaa)](){const _0x555487=a0_0x1cff1f,_0x5067f7=this[_0x555487(0xb1)],_0x1bccfc=this[_0x555487(0x79)][_0x555487(0xa7)](),_0x5bffe2=this['metric']();return{'turnCount':_0x5067f7,'length':_0x1bccfc,'metric':_0x5bffe2};}}class ListNode{constructor(_0x2adc8c,_0x3adb08=null){const _0x208cb1=a0_0x1cff1f;this[_0x208cb1(0x7f)]=_0x2adc8c,this[_0x208cb1(0x8c)]=_0x3adb08;}}function a0_0x3355(_0x12f44f,_0x10b952){const _0x4251d8=a0_0x4251();return a0_0x3355=function(_0x3355b5,_0x1ec05d){_0x3355b5=_0x3355b5-0x73;let _0xabca03=_0x4251d8[_0x3355b5];return _0xabca03;},a0_0x3355(_0x12f44f,_0x10b952);}class LinkedList{constructor(){const _0x38f9a4=a0_0x1cff1f;this[_0x38f9a4(0xa9)]=null;}[a0_0x1cff1f(0xa4)](_0x571db0){const _0x189161=a0_0x1cff1f;this[_0x189161(0xa9)]=new ListNode(_0x571db0,this[_0x189161(0xa9)]);}[a0_0x1cff1f(0x82)](){const _0x46b6fe=a0_0x1cff1f;this[_0x46b6fe(0xa9)]&&(this[_0x46b6fe(0xa9)]=this[_0x46b6fe(0xa9)][_0x46b6fe(0x8c)]);}[a0_0x1cff1f(0x95)](_0x48b2f5){const _0x192dd4=a0_0x1cff1f,_0x5ca616=this[_0x192dd4(0x94)](),_0x4ab230=new ListNode(_0x48b2f5);_0x5ca616?_0x5ca616['next']=_0x4ab230:this[_0x192dd4(0xa9)]=_0x4ab230;}[a0_0x1cff1f(0x7c)](){const _0x518f19=a0_0x1cff1f,_0x2890c0=this[_0x518f19(0x94)]();if(_0x2890c0){if(this[_0x518f19(0xa9)]==_0x2890c0)this[_0x518f19(0xa9)]=null;else{let _0x58ff93=this[_0x518f19(0xa9)];while(_0x58ff93[_0x518f19(0x8c)]!=_0x2890c0)_0x58ff93=_0x58ff93[_0x518f19(0x8c)];_0x58ff93[_0x518f19(0x8c)]=null;}}}['tail'](){const _0x1de4f9=a0_0x1cff1f;let _0x5ed08c=null;for(let _0x1b95fb=this[_0x1de4f9(0xa9)];_0x1b95fb;_0x1b95fb=_0x1b95fb['next']){_0x5ed08c=_0x1b95fb;}return _0x5ed08c;}[a0_0x1cff1f(0xa7)](){const _0x5aee09=a0_0x1cff1f;let _0x190dd0=0x0;for(let _0x1f3420=this[_0x5aee09(0xa9)];_0x1f3420;_0x1f3420=_0x1f3420[_0x5aee09(0x8c)]){_0x190dd0++;}return _0x190dd0;}}class Snake extends LinkedList{constructor(){const _0x44afbb=a0_0x1cff1f;super(),this[_0x44afbb(0x8f)]=0x0,this['color']=_0x44afbb(0xb4),this['glyph']='o',this[_0x44afbb(0xa2)]='@',this[_0x44afbb(0xa1)]=0x0,this[_0x44afbb(0x87)]=0x1,this['pushBack']({'row':0x5,'col':0x5}),this['pushBack']({'row':0x5,'col':0x4}),this['pushBack']({'row':0x5,'col':0x3});}[a0_0x1cff1f(0xb5)](_0x3d00c7){const _0x5a70d8=a0_0x1cff1f,_0x5f4f78=this[_0x5a70d8(0xa9)][_0x5a70d8(0x7f)][_0x5a70d8(0x80)]+this['dRow'],_0x5dcaf6=this['head'][_0x5a70d8(0x7f)]['col']+this['dCol'],_0x38235e=_0x5f4f78>=0x0&&_0x5f4f78<_0x3d00c7[_0x5a70d8(0x7e)]&&_0x5dcaf6>=0x0&&_0x5dcaf6<_0x3d00c7[_0x5a70d8(0x7d)];return!_0x38235e||this[_0x5a70d8(0xac)](_0x5f4f78,_0x5dcaf6);}[a0_0x1cff1f(0x98)](_0x518a3b,_0x40b4d2){const _0x2816a6=a0_0x1cff1f;return this['head']['value'][_0x2816a6(0x80)]==_0x518a3b&&this[_0x2816a6(0xa9)][_0x2816a6(0x7f)][_0x2816a6(0x8b)]==_0x40b4d2;}['intersects'](_0x5eea07,_0x42286b){const _0x20349a=a0_0x1cff1f;let _0x572327=![],_0x3335f5=this[_0x20349a(0xa9)];while(_0x3335f5){if(_0x3335f5[_0x20349a(0x7f)][_0x20349a(0x80)]==_0x5eea07&&_0x3335f5[_0x20349a(0x7f)]['col']==_0x42286b){_0x572327=!![];break;}_0x3335f5=_0x3335f5[_0x20349a(0x8c)];}return _0x572327;}[a0_0x1cff1f(0xa6)](_0x45634c){const _0x547000=a0_0x1cff1f;let _0x37925d=this[_0x547000(0xa2)];for(let _0x5ba8e9=this['head'];_0x5ba8e9;_0x5ba8e9=_0x5ba8e9[_0x547000(0x8c)]){_0x45634c[_0x547000(0x9c)](_0x5ba8e9[_0x547000(0x7f)]['row'],_0x5ba8e9[_0x547000(0x7f)][_0x547000(0x8b)],_0x37925d,this[_0x547000(0x9a)]),_0x37925d=this[_0x547000(0x74)];}}[a0_0x1cff1f(0x88)](_0x4ea436,_0x184d65,_0x4524da,_0xe2967a){const _0x5b8f0e=a0_0x1cff1f;this[_0x5b8f0e(0xa1)]=0x0,this['dCol']=0x0;switch(_0x4ea436){case _0x5b8f0e(0xb0):this[_0x5b8f0e(0x87)]=-0x1;break;case _0x5b8f0e(0xae):this[_0x5b8f0e(0x87)]=0x1;break;case _0x5b8f0e(0xb6):this[_0x5b8f0e(0xa1)]=-0x1;break;case'ArrowDown':this[_0x5b8f0e(0xa1)]=0x1;break;default:break;}}[a0_0x1cff1f(0x9f)](_0x5d4d28){const _0x1e252e=a0_0x1cff1f;let _0x279dc8=this[_0x1e252e(0xa9)][_0x1e252e(0x7f)][_0x1e252e(0x80)]+this[_0x1e252e(0xa1)],_0x294cbd=this[_0x1e252e(0xa9)][_0x1e252e(0x7f)][_0x1e252e(0x8b)]+this['dCol'];_0x5d4d28['drawCharAt'](this['head'][_0x1e252e(0x7f)]['row'],this['head'][_0x1e252e(0x7f)]['col'],this[_0x1e252e(0x74)],this['color']),this[_0x1e252e(0xa4)]({'row':_0x279dc8,'col':_0x294cbd}),_0x5d4d28[_0x1e252e(0x9c)](_0x279dc8,_0x294cbd,this[_0x1e252e(0xa2)],this[_0x1e252e(0x9a)]);if(this[_0x1e252e(0x8f)]>0x0)this['calories']--;else{const _0x3d5917=this[_0x1e252e(0x94)]();_0x5d4d28[_0x1e252e(0x8a)](_0x3d5917[_0x1e252e(0x7f)][_0x1e252e(0x80)],_0x3d5917[_0x1e252e(0x7f)][_0x1e252e(0x8b)]),this[_0x1e252e(0x7c)]();}}[a0_0x1cff1f(0xbc)](_0x1407f1){const _0x102104=a0_0x1cff1f;this[_0x102104(0x8f)]+=_0x1407f1;}}function a0_0x4251(){const _0x8590fb=['candy','drawChars','length','getElementById','head','contestStatus','draw','intersects','seed','ArrowRight','grid','ArrowLeft','turnCount','randBetween','randomCandy','white','willCrash','ArrowUp','ArrowDown','cout','setStatusLine','6GhTxto','randomColor','eat','main-canvas','glyph','gameOver','810vaaJUQ','sleepTimeout','3178424eAHNUC','snake','5Iabccr','Random','popBack','colCount','rowCount','value','row','assign','popFront','keydown','rand','1389208XqnoNM','randomPosition','dCol','steer','2528533sHpPsf','eraseCharAt','col','next','seedRandom','531UtYFix','calories','toFixed','1223196ofmGSd','254308rflWDz','metric','tail','pushBack','yellow','statusString','headIntersects','magenta','color','pink','drawCharAt','orange','lime','step','143054UTxbOw','dRow','headGlyph','Length:\x20','pushFront'];a0_0x4251=function(){return _0x8590fb;};return a0_0x4251();}class Candy{static[a0_0x1cff1f(0x8d)](){const _0x35a1f9=a0_0x1cff1f;this[_0x35a1f9(0x7b)]=new RandANSI();}constructor(_0x3ee48e){const _0x20e27e=a0_0x1cff1f;Object[_0x20e27e(0x81)](this,_0x3ee48e);}static[a0_0x1cff1f(0xb3)](_0x343264,_0x586556,_0x3b52aa){const _0x256305=a0_0x1cff1f,{row:_0x43c3ac,col:_0x44a2f2}=this[_0x256305(0x86)](_0x343264,_0x586556,_0x3b52aa),_0x3244d4=this[_0x256305(0xbb)](),_0x5a4b9a=Candy[_0x256305(0x7b)]['randBetween'](0x1,0xa),_0x53ab15=''+_0x5a4b9a;return new Candy({'row':_0x43c3ac,'col':_0x44a2f2,'calories':_0x5a4b9a,'glyph':_0x53ab15,'color':_0x3244d4});}static[a0_0x1cff1f(0x86)](_0x553437,_0x2ebcd1,_0x55688f){const _0x2bc94e=a0_0x1cff1f;let _0x386b3a,_0x3965e1;do{_0x386b3a=Candy[_0x2bc94e(0x7b)][_0x2bc94e(0xb2)](0x0,_0x2ebcd1),_0x3965e1=Candy[_0x2bc94e(0x7b)]['randBetween'](0x0,_0x55688f);}while(_0x553437[_0x2bc94e(0xac)](_0x386b3a,_0x3965e1));return{'row':_0x386b3a,'col':_0x3965e1};}static[a0_0x1cff1f(0xbb)](){const _0x171b2e=a0_0x1cff1f,_0x225550=['red',_0x171b2e(0x9e),_0x171b2e(0x96),'cyan',_0x171b2e(0x99),_0x171b2e(0x9d),_0x171b2e(0x9b)];return _0x225550[Candy[_0x171b2e(0x7b)][_0x171b2e(0xb2)](0x0,_0x225550['length'])];}[a0_0x1cff1f(0xab)](_0x432830){const _0x726f18=a0_0x1cff1f;_0x432830[_0x726f18(0x9c)](this[_0x726f18(0x80)],this[_0x726f18(0x8b)],this[_0x726f18(0x74)],this['color']);}}class RandANSI{constructor(_0x769278=0x1){const _0x27079f=a0_0x1cff1f;this[_0x27079f(0xad)]=_0x769278;}['setSeed'](_0x8b41f3){const _0x3836f9=a0_0x1cff1f;this[_0x3836f9(0xad)]=_0x8b41f3;}[a0_0x1cff1f(0x84)](){const _0x2f3ade=a0_0x1cff1f;return(this[_0x2f3ade(0xad)]=Number((BigInt(this[_0x2f3ade(0xad)])*0x41c64e6dn+0x3039n)%0x80000000n))>>0x10&0x7fff;}[a0_0x1cff1f(0xb2)](_0x3c3938,_0x290c72){return _0x3c3938+this['rand']()%(_0x290c72-_0x3c3938);}}