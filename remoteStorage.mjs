function a0_0x2fb6(){const _0x16f72e=['2735aNQyYB','register','128146uwKZGt','catch','4722KqyySK','list','http-error','50uPPQPZ','removeItem','https://remote-storage.dan-5d7.workers.dev/v1','stringify','/list','push','4KDyQJM','DELETE','namespace','requestHeaders','POST','keys','filter','search','keysPaged','json','map','450912vfeKlA','apiFetch','endpoint','toString','login','status','name','/getWithMetadata','GET','/set','all','513958eOupsN','getItem','Authorization','message','24fZgaqQ','application/json','/get','type','1314651ypSnes','network-error','code','2017917mJaYMj','2225014VRYgpZ','getNamespace','body','getItemWithMetadata'];a0_0x2fb6=function(){return _0x16f72e;};return a0_0x2fb6();}function a0_0x184f(_0x4757f6,_0x7c42d){const _0x2fb696=a0_0x2fb6();return a0_0x184f=function(_0x184f92,_0x3f1866){_0x184f92=_0x184f92-0x162;let _0x505a46=_0x2fb696[_0x184f92];return _0x505a46;},a0_0x184f(_0x4757f6,_0x7c42d);}const a0_0x2795ab=a0_0x184f;(function(_0x2d1cb2,_0xc0bea3){const _0x5d7eae=a0_0x184f,_0x38cf8a=_0x2d1cb2();while(!![]){try{const _0x23f56b=parseInt(_0x5d7eae(0x179))/0x1+parseInt(_0x5d7eae(0x167))/0x2+parseInt(_0x5d7eae(0x16f))/0x3*(parseInt(_0x5d7eae(0x184))/0x4)+parseInt(_0x5d7eae(0x177))/0x5*(parseInt(_0x5d7eae(0x17b))/0x6)+-parseInt(_0x5d7eae(0x18f))/0x7*(parseInt(_0x5d7eae(0x16b))/0x8)+parseInt(_0x5d7eae(0x172))/0x9+-parseInt(_0x5d7eae(0x17e))/0xa*(parseInt(_0x5d7eae(0x173))/0xb);if(_0x23f56b===_0xc0bea3)break;else _0x38cf8a['push'](_0x38cf8a['shift']());}catch(_0x39c9ea){_0x38cf8a['push'](_0x38cf8a['shift']());}}}(a0_0x2fb6,0x42c12));export class RemoteStorage{constructor(_0x3b33c0,_0xedc6c5){const _0x37bc29=a0_0x184f;this[_0x37bc29(0x186)]=_0x3b33c0,this[_0x37bc29(0x191)]=_0x37bc29(0x180),this[_0x37bc29(0x187)]={'Content-Type':_0x37bc29(0x16c)};if(_0xedc6c5)this[_0x37bc29(0x187)][_0x37bc29(0x169)]=_0xedc6c5;}async[a0_0x2795ab(0x178)](_0x10f449,_0x1fe927){const _0x85f6ca=a0_0x2795ab,_0x5acb10=await fetch(this[_0x85f6ca(0x191)]+'/register',{'method':_0x85f6ca(0x188),'headers':{'Content-Type':'application/json'},'body':JSON[_0x85f6ca(0x181)]({'userID':_0x10f449,'password':_0x1fe927})}),_0x582178=await _0x5acb10[_0x85f6ca(0x18d)]()[_0x85f6ca(0x17a)](()=>({}));if(!_0x5acb10['ok'])throw{'status':_0x5acb10['status'],'body':_0x582178};return{'status':_0x5acb10[_0x85f6ca(0x194)],'json':_0x582178};}async[a0_0x2795ab(0x193)](_0x1aec91,_0x52e9ab){const _0x1d6189=a0_0x2795ab,_0x356626=await fetch(this[_0x1d6189(0x191)]+'/login',{'method':_0x1d6189(0x188),'headers':{'Content-Type':'application/json'},'body':JSON[_0x1d6189(0x181)]({'namespace':this[_0x1d6189(0x186)],'userID':_0x1aec91,'password':_0x52e9ab})}),_0x4e980f=await _0x356626[_0x1d6189(0x18d)]()[_0x1d6189(0x17a)](()=>({}));if(!_0x356626['ok'])throw{'status':_0x356626[_0x1d6189(0x194)],'body':_0x4e980f};const _0x19703d=_0x4e980f['token'];return this['requestHeaders'][_0x1d6189(0x169)]=_0x19703d,_0x19703d;}async[a0_0x2795ab(0x189)](){const _0x58b6e1=a0_0x2795ab;let _0x5e1899=[],_0x4d8eb3=null;while(!![]){const {keys:_0x19b93a,cursor:_0x552fb1,list_complete:_0x3e454c}=await this[_0x58b6e1(0x18c)]({'cursor':_0x4d8eb3});_0x5e1899[_0x58b6e1(0x183)](..._0x19b93a);if(_0x3e454c)break;_0x4d8eb3=_0x552fb1;}return _0x5e1899;}async[a0_0x2795ab(0x18c)]({limit:limit=0x3e8,cursor:_0x1c7a6c=null}={}){const _0x46a22b=a0_0x2795ab,{items:_0x49c10a,cursor:_0x4218f9,list_complete:_0xb112bb}=await this[_0x46a22b(0x17c)]({'limit':limit,'cursor':_0x1c7a6c}),_0x3372fe=_0x49c10a['map'](_0x785e77=>_0x785e77[_0x46a22b(0x162)]);return{'keys':_0x3372fe,'cursor':_0x4218f9,'list_complete':_0xb112bb};}async[a0_0x2795ab(0x174)](..._0x54360b){const _0x3c6320=a0_0x2795ab,_0x341084={};let _0x8feb35=null;while(!![]){const {items:_0x246e6e,cursor:_0x45d555,list_complete:_0x41f2df}=await this['list']({'cursor':_0x8feb35}),_0x379967=_0x54360b['length']?_0x246e6e[_0x3c6320(0x18a)](_0x5bece4=>_0x54360b['some'](_0x10c5b5=>_0x5bece4[_0x3c6320(0x162)]['startsWith'](_0x10c5b5))):_0x246e6e;await Promise[_0x3c6320(0x166)](_0x379967[_0x3c6320(0x18e)](async({name:_0x1a1abe,metadata:_0x15c80c})=>{const _0x19e5ce=_0x3c6320,_0x514f59=await this[_0x19e5ce(0x168)](_0x1a1abe);_0x341084[_0x1a1abe]={'value':_0x514f59,'metadata':_0x15c80c};}));if(_0x41f2df)break;_0x8feb35=_0x45d555;}return _0x341084;}async[a0_0x2795ab(0x17c)]({limit:limit=0x3e8,cursor:cursor=null}={}){const _0x567dac=a0_0x2795ab;return this[_0x567dac(0x190)](_0x567dac(0x164),_0x567dac(0x182),null,{'limit':limit,'cursor':cursor});}async['setItem'](_0x25db94,_0xc144c2){const _0x22fd07=a0_0x2795ab;return this[_0x22fd07(0x190)](_0x22fd07(0x188),_0x22fd07(0x165),{'key':_0x25db94,'value':_0xc144c2});}async['getItem'](_0x3c8c4f){const _0x598cbb=a0_0x2795ab;return this[_0x598cbb(0x190)](_0x598cbb(0x164),_0x598cbb(0x16d),null,{'key':_0x3c8c4f});}async[a0_0x2795ab(0x176)](_0xcc748b){const _0x4523bf=a0_0x2795ab;return this['apiFetch'](_0x4523bf(0x164),_0x4523bf(0x163),null,{'key':_0xcc748b});}async[a0_0x2795ab(0x17f)](_0x761c3a){const _0x42ef1c=a0_0x2795ab;return this['apiFetch'](_0x42ef1c(0x185),'/delete',null,{'key':_0x761c3a});}async['clear'](){const _0xad00d3=a0_0x2795ab,_0x311987=await this[_0xad00d3(0x189)]();return await Promise['all'](_0x311987[_0xad00d3(0x18e)](_0x25110f=>this[_0xad00d3(0x17f)](_0x25110f))),null;}async[a0_0x2795ab(0x190)](_0x4e893b,_0x5bfd27,_0x19714f=null,_0xacd53b={}){const _0x17fe47=a0_0x2795ab;_0xacd53b={..._0xacd53b,'namespace':this['namespace']};const _0x18617d=new URL(''+this['endpoint']+_0x5bfd27);_0x18617d[_0x17fe47(0x18b)]=new URLSearchParams(Object['entries'](_0xacd53b)[_0x17fe47(0x18a)](([_0x5e96e3,_0x422fce])=>_0x422fce!==undefined&&_0x422fce!==null))[_0x17fe47(0x192)]();const _0x3069fb={'method':_0x4e893b,'headers':this['requestHeaders']};if(_0x19714f)_0x3069fb[_0x17fe47(0x175)]=JSON['stringify'](_0x19714f);try{const _0x2e64dd=await fetch(_0x18617d,_0x3069fb),_0x371f9a=await _0x2e64dd[_0x17fe47(0x18d)]()[_0x17fe47(0x17a)](()=>({}));if(!_0x2e64dd['ok'])throw{'type':'http-error','status':_0x2e64dd[_0x17fe47(0x194)],'body':_0x371f9a};return _0x371f9a;}catch(_0x581067){if(_0x581067?.[_0x17fe47(0x16e)]===_0x17fe47(0x17d))throw _0x581067;const _0x535d29=_0x581067?.[_0x17fe47(0x16a)]||_0x581067?.[_0x17fe47(0x162)]||_0x581067?.[_0x17fe47(0x171)]||'Unknown\x20network\x20error';throw{'type':_0x17fe47(0x170),'detail':_0x535d29};}}}